define("SeedModules.MindPlus/modules/myworks/directives/sidebar",["SeedModules.MindPlus/modules/myworks/module"],function(e){"use strict";e.directive("sidebar",[function(){return{restrict:"AE",replace:!0,transclude:!0,template:'<div class="sidebar" ng-transclude></div>',link:function(e,o,s,t){o=$(o),e.$on("toggleSidebar",function(e,s){var t=o.find(".sidebar-item.sidebar-show"),n=o.find(".sidebar-item"),r=$(".sidebar-content");o.hasClass("sidebar-mini")?(o.removeClass("sidebar-mini"),r.removeClass("sidebar-min")):(t.removeClass("sidebar-show"),n.children("ul").removeAttr("style"),o.addClass("sidebar-mini"),r.addClass("sidebar-min"))})}}}])}),define("SeedModules.MindPlus/modules/myworks/directives/workItemContent",["SeedModules.MindPlus/modules/myworks/module"],function(e){"use strict";e.directive("workItemContent",["SeedModules.AngularUI/modules/services/requestService",function(e){return{restrict:"EA",replace:!0,templateUrl:"/SeedModules.MindPlus/modules/myworks/templates/workItemContent.html",scope:{workItem:"=workItemContent"},link:function(o,s,t,n){o.status="loading",o.load=function(){e.url("/api/mindplus/workitem/"+o.workItem.id+"/content").options({showLoading:!1}).get().result.then(function(e){e.content&&""!==e.content?o.status="show":o.status="new"})},o.editContent=function(){o.status="editing"},o.$on("spyscrolled",function(e){})}}}])}),define("SeedModules.MindPlus/modules/myworks/controllers/home",["require","exports","SeedModules.MindPlus/modules/myworks/module"],function(e,o,s){"use strict";o.__esModule=!0;var t=function(){function e(e,o,s,t,n,r){this.$scope=e,this.$state=o,this.$window=s,this.utility=t,this.popupService=n,this.requestService=r,e.vm=this,e.globalSearching=!1,e.menus=[{icon:"fas fa-briefcase",text:"工作",children:[{text:"我的工作",state:"home.works",stateParams:{parentid:""}},{text:"已关注"},{text:"全部"}]},{icon:"fas fa-list-ul",text:"工作项",children:[{text:"我的工作项"},{text:"已关注"},{text:"全部"}]},{icon:"fas fa-clipboard-list",text:"工作模板"},{icon:"fas fa-cog",text:"设置"},{icon:"fas fa-trash-alt",text:"回收站",state:"home.trash"}]}return e.prototype.menuClicked=function(e){e.state&&this.$state.go(e.state,e.stateParamse||{})},e.prototype.blurSearch=function(){this.$scope.globalSearching=!1},e.prototype.focusSearch=function(){this.$scope.globalSearching=!0},e.prototype.logout=function(){var e=this;this.popupService.confirm("是否退出？").ok(function(){e.requestService.url("/api/account/logout").options({dataOnly:!0}).post().result.then(function(){e.$window.location.reload()})})},e.$inject=["$scope","$state","$window","SeedModules.AngularUI/modules/services/utility","app/services/popupService","SeedModules.AngularUI/modules/services/requestService"],e}();s.controller("SeedModules.MindPlus/modules/myworks/controllers/home",t)}),define("SeedModules.MindPlus/modules/myworks/controllers/mymind",["SeedModules.MindPlus/modules/myworks/module"],function(e){"use strict";e.controller("SeedModules.MindPlus/modules/myworks/controllers/mymind",["$appEnvironment",function(e){e.currentWork=null}])}),define("SeedModules.MindPlus/modules/myworks/controllers/works",["SeedModules.MindPlus/modules/myworks/module"],function(e){"use strict";e.controller("SeedModules.MindPlus/modules/myworks/controllers/works",["$scope","$modal","$state","$stateParams","$appConfig","app/services/popupService","SeedModules.AngularUI/modules/services/requestService","SeedModules.AngularUI/modules/factories/ngTableRequest","SeedModules.AngularUI/modules/factories/schemaFormParams",function(e,o,s,t,n,r,l,i,d){e.$appConfig=n,e.tableParams=new i({url:"/api/mindplus/works/query?parent="+t.parentid,showLoading:!1}).ngTableParams(),e.formParams=(new d).properties({name:{title:"名称",type:"string",required:!0},description:{title:"描述",type:"string"}}),e.form=["name",{key:"description",type:"textarea",placeholder:"描述信息"}],e.create=function(){o.open({templateUrl:"/SeedModules.AngularUI/modules/views/schemaConfirm.html",data:{title:"新建项目",formParams:e.formParams,form:e.form,model:{}}}).result.then(function(o){o.parentId=t.parentid,l.url("/api/mindplus/works").post(o).result.then(function(o){e.tableParams.reload()})})},e.addfolder=function(){o.open({templateUrl:"/SeedModules.AngularUI/modules/views/schemaConfirm.html",data:{title:"新建文件夹",formParams:e.formParams,form:["name"],model:{}}}).result.then(function(o){o.isFolder=!0,o.parentId=t.parentid,l.url("/api/mindplus/works").post(o).result.then(function(o){e.tableParams.reload()})})},e.back=function(){l.url("/api/mindplus/works/"+t.parentid).options({showLoading:!1}).get().result.then(function(e){s.go("home.works",{parentid:e.parentId})})}}])}),define("SeedModules.MindPlus/modules/myworks/controllers/trash",["SeedModules.MindPlus/modules/myworks/module"],function(e){"use strict";e.controller("SeedModules.MindPlus/modules/myworks/controllers/trash",["$scope",function(e){}])}),define("SeedModules.MindPlus/modules/myworks/controllers/workspace",["SeedModules.MindPlus/modules/myworks/module"],function(e){"use strict";e.controller("SeedModules.MindPlus/modules/myworks/controllers/workspace",["$scope","$modal","$state","$stateParams","$appConfig","$appEnvironment","app/services/popupService","SeedModules.AngularUI/modules/services/requestService","SeedModules.AngularUI/modules/factories/ngTableRequest","SeedModules.AngularUI/modules/factories/schemaFormParams",function(e,o,s,t,n,r,l,i,d,u){e.current=null,e.workMenu=[{text:"任务",icon:"fas fa-tasks fa-fw",children:[{icon:"fas fa-fw",text:"脑图",itemClicked:function(e){window.location.href=n.siteSettings.prefix+"/SeedModules.MindPlus/Home/Mind#/mindeditor/"+t.id}},{icon:"fas fa-fw",text:"任务列表",itemClicked:function(){s.go("workspace.list",{id:t.id})}},{icon:"fas fa-fw",text:"任务板"},{icon:"fas fa-fw",text:"进度"}]},{text:"设置",icon:"fas fa-cogs fa-fw",children:[{icon:"fas fa-fw",text:"任务设置",itemClicked:function(){s.go("workspace.settings",{id:t.id})}},{icon:"fas fa-fw",text:"标签设置",itemClicked:function(){s.go("workspace.tags",{id:t.id})}}]}],e.load=function(){i.url("/api/mindplus/works/"+t.id).options({showLoading:!1}).get().result.then(function(o){e.current=o,r.currentWork=o})}}])}),define("SeedModules.MindPlus/modules/myworks/controllers/workItem",["SeedModules.MindPlus/modules/myworks/module"],function(e){"use strict";e.controller("SeedModules.MindPlus/modules/myworks/controllers/workItem",["$scope","SeedModules.AngularUI/modules/services/requestService","SeedModules.AngularUI/modules/factories/schemaFormParams",function(e,o,s){e.formParams=(new s).properties({title:{title:"任务名称",type:"string",required:!0}}),e.formFields=[{key:"title",placeholder:"输入任务名称"}],e.works=[],e.queryCities=[{value:1,text:"Amsterdam",continent:"Europe"},{value:4,text:"Washington",continent:"America"},{value:7,text:"Sydney",continent:"Australia"},{value:10,text:"Beijing",continent:"Asia"},{value:13,text:"Cairo",continent:"Africa"}],e.loadWorks=function(s){s&&s.children&&s.children.length>0||!s&&e.works.length>0||o.url("/api/mindplus/works/tree?parent="+(s?s.id:"")).options({showLoading:!1}).get().result.then(function(o){for(var t in o)o[t].children=o[t].isFolder?[]:null;s?s.children=o:e.works=o})},e.workSelected=function(o){e.$data.work=o},e.submit=function(){e.$data.model.mindWorkId=e.$data.work.id,e.$close(e.$data.model)}}])}),define("SeedModules.MindPlus/modules/myworks/controllers/workItems",["SeedModules.MindPlus/modules/myworks/module"],function(e){"use strict";e.controller("SeedModules.MindPlus/modules/myworks/controllers/workItems",["$scope","$stateParams","$modal","$appEnvironment","SeedModules.AngularUI/modules/services/requestService","SeedModules.AngularUI/modules/services/utility",function(e,o,s,t,n,r){e.list=[],e.finished=null,e.initWorkItem=function(e){e.titleStyle={"padding-left":30*((e.level||1)-1)+"px"}},e.load=function(){n.url("/api/mindplus/workitem/inwork/"+o.id+"?keyword="+(null!==e.finished?"&finished="+e.finished:"")).options({showLoading:!1}).get().result.then(function(o){r.toTree(o).key("id").parentKey("parentId").onEach(function(e,o){o.$$isExpand=!0}).then(function(o){e.list=o})})},e.create=function(){s.open({templateUrl:"/SeedModules.MindPlus/modules/myworks/views/workItem.html",size:"lg",data:{title:"新建任务",model:{},work:t.currentWork}}).result.then(function(o){n.url("/api/mindplus/workitem").post(o).result.then(function(o){e.load()})})}}])}),define("SeedModules.MindPlus/modules/myworks/controllers/settings",["SeedModules.MindPlus/modules/myworks/module"],function(e){"use strict";e.controller("SeedModules.MindPlus/modules/myworks/controllers/settings",["$scope",function(e){}])}),define("SeedModules.MindPlus/modules/myworks/controllers/tags",["SeedModules.MindPlus/modules/myworks/module"],function(e){"use strict";e.controller("SeedModules.MindPlus/modules/myworks/controllers/tags",["$scope","$stateParams","$modal","app/services/popupService","SeedModules.AngularUI/modules/services/requestService","SeedModules.AngularUI/modules/factories/ngTableRequest","SeedModules.AngularUI/modules/factories/schemaFormParams",function(e,o,s,t,n,r,l){e.list=[];var i=(new l).properties({name:{title:"名称",type:"string",required:!0},color:{title:"颜色",type:"string",required:!0}}),d=["name",{key:"color",type:"simplecolor"}];e.load=function(){n.url("/api/mindplus/tags/query").options({showLoading:!1}).post({}).result.then(function(o){e.list=o})},e.create=function(){s.open({templateUrl:"/SeedModules.AngularUI/modules/views/schemaConfirm.html",size:"sm",data:{title:"新建标签",formParams:i,form:d,model:{}}}).result.then(function(s){n.url("/api/mindplus/tags").post($.extend(s,{mindWorkId:o.id})).result.then(function(o){e.load()})})},e.edit=function(t){s.open({templateUrl:"/SeedModules.AngularUI/modules/views/schemaConfirm.html",size:"sm",data:{title:"编辑标签",formParams:i,form:d,model:$.extend({},t)}}).result.then(function(s){n.url("/api/mindplus/tags/"+t.id).put($.extend(s,{mindWorkId:o.id})).result.then(function(o){e.load()})})},e.drop=function(o){t.confirm("是否删除标签？").ok(function(){n.url("/api/mindplus/tags/"+o.id).drop().result.then(function(o){e.load()})})}}])}),define("SeedModules.MindPlus/modules/myworks/components/work/work",["SeedModules.MindPlus/modules/myworks/module"],function(e){"use strict";e.controller("SeedModules.MindPlus/modules/myworks/components/work/work",["$scope","$state","$stateParams","$modal","SeedModules.AngularUI/modules/services/requestService",function(e,o,s,t,n){e.current=null,e.loadDetails=function(){n.url("/api/mindplus/works/"+s.id).options({showLoading:!1}).get().result.then(function(o){e.current=o})},e.settings=function(){t.open({templateUrl:"/SeedModules.MindPlus/modules/myworks/components/work/workSettings.html"})}}])}),define("SeedModules.MindPlus/modules/myworks/components/workitem/master",["SeedModules.MindPlus/modules/myworks/module"],function(e){"use strict";e.controller("SeedModules.MindPlus/modules/myworks/components/workitem/master",["$scope","$state","$stateParams","$modal","app/services/popupService","SeedModules.AngularUI/modules/services/requestService","SeedModules.AngularUI/modules/factories/schemaFormParams",function(e,o,s,t,n,r,l){e.status=[],e.workitems=[],e.views={"home.work.workitems.board":{state:"home.work.workitems.board",text:"看板视图",icon:"glyphicon glyphicon-blackboard"},"home.work.workitems.mind":{state:"home.work.workitems.mind",text:"脑图",icon:"glyphicon glyphicon-cloud"},"home.work.workitems.document":{state:"home.work.workitems.document",text:"文档视图",icon:"glyphicon glyphicon-file"},"home.work.workitems.gantt":{state:"home.work.workitems.gantt",text:"甘特图",icon:"glyphicon glyphicon-tasks"}},e.loadWorkItems=function(){r.url("/api/mindplus/workitem/inwork/"+s.id+"?keyword="+(null!==e.finished?"&finished="+e.finished:"")).options({showLoading:!1}).get().result.then(function(o){e.workitems=o})},e.createWorkItem=function(){t.open({templateUrl:"/SeedModules.MindPlus/modules/myworks/views/workItem.html",size:"lg",data:{title:"新建任务",model:{},work:e.current}}).result.then(function(o){r.url("/api/mindplus/workitem").post(o).result.then(function(o){e.loadWorkItems()})})},e.loadStatus=function(){r.url("/api/mindplus/works/"+s.id+"/status").options({showLoading:!1}).get().result.then(function(o){e.status=o})},e.addStatus=function(){t.open({templateUrl:"/SeedModules.AngularUI/modules/views/schemaConfirm.html",data:{title:"添加状态",formParams:(new l).properties({name:{title:"状态名称",type:"string",required:!0}}),form:["name"]},size:"sm"}).result.then(function(o){r.url("/api/mindplus/works/"+s.id+"/status").post(o).result.then(function(o){e.loadStatus()})})},e.editStatus=function(o){t.open({templateUrl:"/SeedModules.AngularUI/modules/views/schemaConfirm.html",data:{title:"编辑状态",formParams:(new l).properties({name:{title:"状态名称",type:"string",required:!0}}),model:$.extend({},o),form:["name"]},size:"sm"}).result.then(function(o){r.url("/api/mindplus/works/status").put(o).result.then(function(o){e.loadStatus()})})},e.deleteStatus=function(o){n.confirm("是否删除？").ok(function(){r.url("/api/mindplus/works/status/"+o.id).drop().result.then(function(o){e.loadStatus()})})},e.expand=function(o){e.$broadcast("expandWorkItem",o)},e.reduce=function(){e.$broadcast("reduceWorkItem",null)}}])}),define("SeedModules.MindPlus/modules/myworks/components/workitem/document",["require","exports","SeedModules.MindPlus/modules/myworks/module","pell","rcss!/SeedModules.MindPlus/js/pell/pell.min.css"],function(e,o,s,t){"use strict";o.__esModule=!0;var n=function(){function e(e,o,s,n,r,l){this.$scope=e,this.$element=o,this.$timeout=s,this.popupService=n,this.utility=r,this.requestService=l,t.init({element:o.find("[pell-area]").get(0),defaultParagraphSeparator:"div",styleWithCSS:!1,onChange:function(e){},actions:[],classes:{actionbar:"pell-actionbar",button:"pell-button",content:"pell-content",selected:"pell-button-selected"}})}return e.$inject=["$scope","$element","$timeout","app/services/popupService","SeedModules.AngularUI/modules/services/utility","SeedModules.AngularUI/modules/services/requestService"],e}();s.controller("SeedModules.MindPlus/modules/myworks/components/workitem/document",n)}),define("SeedModules.MindPlus/modules/myworks/components/workitem/board",["SeedModules.MindPlus/modules/myworks/module"],function(e){"use strict";e.controller("SeedModules.MindPlus/modules/myworks/components/workitem/board",["$scope","$state","$stateParams","SeedModules.AngularUI/modules/services/requestService",function(e,o,s,t){}])}),define("SeedModules.MindPlus/modules/myworks/requires",["require","exports","SeedModules.MindPlus/modules/myworks/directives/sidebar","SeedModules.MindPlus/modules/myworks/directives/workItemContent","SeedModules.MindPlus/modules/myworks/controllers/home","SeedModules.MindPlus/modules/myworks/controllers/mymind","SeedModules.MindPlus/modules/myworks/controllers/works","SeedModules.MindPlus/modules/myworks/controllers/trash","SeedModules.MindPlus/modules/myworks/controllers/workspace","SeedModules.MindPlus/modules/myworks/controllers/workItem","SeedModules.MindPlus/modules/myworks/controllers/workItems","SeedModules.MindPlus/modules/myworks/controllers/settings","SeedModules.MindPlus/modules/myworks/controllers/tags","SeedModules.MindPlus/modules/myworks/components/work/work","SeedModules.MindPlus/modules/myworks/components/workitem/master","SeedModules.MindPlus/modules/myworks/components/workitem/document","SeedModules.MindPlus/modules/myworks/components/workitem/board"],function(e,o){"use strict";o.__esModule=!0});