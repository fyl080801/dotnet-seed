!function(){"use strict";angular.module("ui.tree",[]).constant("treeConfig",{treeClass:"angular-ui-tree",emptyTreeClass:"angular-ui-tree-empty",dropzoneClass:"angular-ui-tree-dropzone",hiddenClass:"angular-ui-tree-hidden",nodesClass:"angular-ui-tree-nodes",nodeClass:"angular-ui-tree-node",handleClass:"angular-ui-tree-handle",placeholderClass:"angular-ui-tree-placeholder",dragClass:"angular-ui-tree-drag",dragThreshold:3,defaultCollapsed:!1,appendChildOnHover:!0})}(),function(){"use strict";angular.module("ui.tree").controller("TreeHandleController",["$scope","$element",function(e,n){this.scope=e,e.$element=n,e.$nodeScope=null,e.$type="uiTreeHandle"}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodeController",["$scope","$element",function(e,n){function t(e){if(!e)return 0;var n,o,r,l=0,a=e.childNodes();if(!a||0===a.length)return 0;for(r=a.length-1;r>=0;r--)n=a[r],o=1+t(n),l=Math.max(l,o);return l}this.scope=e,e.$element=n,e.$modelValue=null,e.$parentNodeScope=null,e.$childNodesScope=null,e.$parentNodesScope=null,e.$treeScope=null,e.$handleScope=null,e.$type="uiTreeNode",e.$$allowNodeDrop=!1,e.collapsed=!1,e.expandOnHover=!1,e.init=function(t){var o=t[0];e.$treeScope=t[1]?t[1].scope:null,e.$parentNodeScope=o.scope.$nodeScope,e.$modelValue=o.scope.$modelValue[e.$index],e.$parentNodesScope=o.scope,o.scope.initSubNode(e),n.on("$destroy",function(){o.scope.destroySubNode(e)})},e.index=function(){return e.$parentNodesScope.$modelValue.indexOf(e.$modelValue)},e.dragEnabled=function(){return!(e.$treeScope&&!e.$treeScope.dragEnabled)},e.isSibling=function(n){return e.$parentNodesScope==n.$parentNodesScope},e.isChild=function(n){var t=e.childNodes();return t&&t.indexOf(n)>-1},e.prev=function(){var n=e.index();return n>0?e.siblings()[n-1]:null},e.siblings=function(){return e.$parentNodesScope.childNodes()},e.childNodesCount=function(){return e.childNodes()?e.childNodes().length:0},e.hasChild=function(){return e.childNodesCount()>0},e.childNodes=function(){return e.$childNodesScope&&e.$childNodesScope.$modelValue?e.$childNodesScope.childNodes():null},e.accept=function(n,t){return e.$childNodesScope&&e.$childNodesScope.$modelValue&&e.$childNodesScope.accept(n,t)},e.remove=function(){return e.$parentNodesScope.removeNode(e)},e.toggle=function(){e.collapsed=!e.collapsed,e.$treeScope.$callbacks.toggle(e.collapsed,e)},e.collapse=function(){e.collapsed=!0},e.expand=function(){e.collapsed=!1},e.depth=function(){var n=e.$parentNodeScope;return n?n.depth()+1:1},e.maxSubDepth=function(){return e.$childNodesScope?t(e.$childNodesScope):0}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodesController",["$scope","$element","$timeout",function(e,n,t){this.scope=e,e.$element=n,e.$modelValue=null,e.$nodeScope=null,e.$treeScope=null,e.$type="uiTreeNodes",e.$nodesMap={},e.nodropEnabled=!1,e.maxDepth=0,e.cloneEnabled=!1,e.initSubNode=function(n){return n.$modelValue?void(e.$nodesMap[n.$modelValue.$$hashKey]=n):null},e.destroySubNode=function(n){return n.$modelValue?void(e.$nodesMap[n.$modelValue.$$hashKey]=null):null},e.accept=function(n,t){return e.$treeScope.$callbacks.accept(n,e,t)},e.beforeDrag=function(n){return e.$treeScope.$callbacks.beforeDrag(n)},e.isParent=function(n){return n.$parentNodesScope==e},e.hasChild=function(){return e.$modelValue.length>0},e.removeNode=function(n){var o=e.$modelValue.indexOf(n.$modelValue);return o>-1?(t(function(){e.$modelValue.splice(o,1)[0]}),e.$treeScope.$callbacks.removed(n)):null},e.insertNode=function(n,o){t(function(){e.$modelValue.splice(n,0,o)})},e.childNodes=function(){var n,t=[];if(e.$modelValue)for(n=0;n<e.$modelValue.length;n++)t.push(e.$nodesMap[e.$modelValue[n].$$hashKey]);return t},e.depth=function(){return e.$nodeScope?e.$nodeScope.depth():0},e.outOfDepth=function(n){var t=e.maxDepth||e.$treeScope.maxDepth;return t>0&&e.depth()+n.maxSubDepth()+1>t}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeController",["$scope","$element",function(e,n){this.scope=e,e.$element=n,e.$nodesScope=null,e.$type="uiTree",e.$emptyElm=null,e.$dropzoneElm=null,e.$callbacks=null,e.dragEnabled=!0,e.emptyPlaceholderEnabled=!0,e.maxDepth=0,e.dragDelay=0,e.cloneEnabled=!1,e.nodropEnabled=!1,e.dropzoneEnabled=!1,e.isEmpty=function(){return e.$nodesScope&&e.$nodesScope.$modelValue&&0===e.$nodesScope.$modelValue.length},e.place=function(n){e.$nodesScope.$element.append(n),e.$emptyElm.remove()},this.resetEmptyElement=function(){e.$nodesScope.$modelValue&&0!==e.$nodesScope.$modelValue.length||!e.emptyPlaceholderEnabled?e.$emptyElm.remove():n.append(e.$emptyElm)},this.resetDropzoneElement=function(){e.$nodesScope.$modelValue&&0===e.$nodesScope.$modelValue.length||!e.dropzoneEnabled?e.$dropzoneElm.remove():n.append(e.$dropzoneElm)},e.resetEmptyElement=this.resetEmptyElement,e.resetDropzoneElement=this.resetDropzoneElement}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTree",["treeConfig","$window",function(e,n){return{restrict:"A",scope:!0,controller:"TreeController",link:function(t,o,r,l){var a,i,s,d={accept:null,beforeDrag:null},u={};angular.extend(u,e),u.treeClass&&o.addClass(u.treeClass),"table"===o.prop("tagName").toLowerCase()?(t.$emptyElm=angular.element(n.document.createElement("tr")),i=o.find("tr"),s=i.length>0?angular.element(i).children().length:1e6,a=angular.element(n.document.createElement("td")).attr("colspan",s),t.$emptyElm.append(a)):(t.$emptyElm=angular.element(n.document.createElement("div")),t.$dropzoneElm=angular.element(n.document.createElement("div"))),u.emptyTreeClass&&t.$emptyElm.addClass(u.emptyTreeClass),u.dropzoneClass&&t.$dropzoneElm.addClass(u.dropzoneClass),t.$watch("$nodesScope.$modelValue.length",function(e){angular.isNumber(e)&&(l.resetEmptyElement(),l.resetDropzoneElement())},!0),t.$watch(r.dragEnabled,function(e){"boolean"==typeof e&&(t.dragEnabled=e)}),t.$watch(r.emptyPlaceholderEnabled,function(e){"boolean"==typeof e&&(t.emptyPlaceholderEnabled=e,l.resetEmptyElement())}),t.$watch(r.nodropEnabled,function(e){"boolean"==typeof e&&(t.nodropEnabled=e)}),t.$watch(r.dropzoneEnabled,function(e){"boolean"==typeof e&&(t.dropzoneEnabled=e,l.resetDropzoneElement())}),t.$watch(r.cloneEnabled,function(e){"boolean"==typeof e&&(t.cloneEnabled=e)}),t.$watch(r.maxDepth,function(e){"number"==typeof e&&(t.maxDepth=e)}),t.$watch(r.dragDelay,function(e){"number"==typeof e&&(t.dragDelay=e)}),d.accept=function(e,n,t){return!(n.nodropEnabled||n.$treeScope.nodropEnabled||n.outOfDepth(e))},d.beforeDrag=function(e){return!0},d.expandTimeoutStart=function(){},d.expandTimeoutCancel=function(){},d.expandTimeoutEnd=function(){},d.removed=function(e){},d.dropped=function(e){},d.dragStart=function(e){},d.dragMove=function(e){},d.dragStop=function(e){},d.beforeDrop=function(e){},d.toggle=function(e,n){},t.$watch(r.uiTree,function(e,n){angular.forEach(e,function(e,n){d[n]&&"function"==typeof e&&(d[n]=e)}),t.$callbacks=d},!0)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeHandle",["treeConfig",function(e){return{require:"^uiTreeNode",restrict:"A",scope:!0,controller:"TreeHandleController",link:function(n,t,o,r){var l={};angular.extend(l,e),l.handleClass&&t.addClass(l.handleClass),n!=r.scope&&(n.$nodeScope=r.scope,r.scope.$handleScope=n)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNode",["treeConfig","UiTreeHelper","$window","$document","$timeout","$q",function(e,n,t,o,r,l){return{require:["^uiTreeNodes","^uiTree"],restrict:"A",controller:"TreeNodeController",link:function(a,i,s,d){var u,c,p,m,g,f,h,$,b,v,S,x,y,N,E,w,C,T,A,M,D,I,F,O,U,H,k,Y={},V="ontouchstart"in window,X=null,P=document.body,z=document.documentElement;angular.extend(Y,e),Y.nodeClass&&i.addClass(Y.nodeClass),a.init(d),a.collapsed=!!n.getNodeAttribute(a,"collapsed")||e.defaultCollapsed,a.expandOnHover=!!n.getNodeAttribute(a,"expandOnHover"),a.scrollContainer=n.getNodeAttribute(a,"scrollContainer")||s.scrollContainer||null,a.sourceOnly=a.nodropEnabled||a.$treeScope.nodropEnabled,a.$watch(s.collapsed,function(e){"boolean"==typeof e&&(a.collapsed=e)}),a.$watch("collapsed",function(e){n.setNodeAttribute(a,"collapsed",e),s.$set("collapsed",e)}),a.$watch(s.expandOnHover,function(e){"boolean"!=typeof e&&"number"!=typeof e||(a.expandOnHover=e)}),a.$watch("expandOnHover",function(e){n.setNodeAttribute(a,"expandOnHover",e),s.$set("expandOnHover",e)}),s.$observe("scrollContainer",function(e){"string"==typeof e&&(a.scrollContainer=e)}),a.$watch("scrollContainer",function(e){n.setNodeAttribute(a,"scrollContainer",e),s.$set("scrollContainer",e),h=document.querySelector(e)}),a.$on("angular-ui-tree:collapse-all",function(){a.collapsed=!0}),a.$on("angular-ui-tree:expand-all",function(){a.collapsed=!1}),x=function(e){if((V||2!==e.button&&3!==e.which)&&!(e.uiTreeDragging||e.originalEvent&&e.originalEvent.uiTreeDragging)){var r,l,s,d,h,$,x,y,N,E=angular.element(e.target);if(r=n.treeNodeHandlerContainerOfElement(E),r&&(E=angular.element(r)),l=i.clone(),y=n.elementIsTreeNode(E),N=n.elementIsTreeNodeHandle(E),(y||N)&&!(y&&n.elementContainsTreeNodeHandler(E)||(s=E.prop("tagName").toLowerCase(),"input"==s||"textarea"==s||"button"==s||"select"==s))){for(U=angular.element(e.target),H=U[0].attributes["ui-tree"];U&&U[0]&&U[0]!==i&&!H;){if(U[0].attributes&&(H=U[0].attributes["ui-tree"]),n.nodrag(U))return;U=U.parent()}a.beforeDrag(a)&&(e.uiTreeDragging=!0,e.originalEvent&&(e.originalEvent.uiTreeDragging=!0),e.preventDefault(),h=n.eventObj(e),u=!0,c=n.dragInfo(a),k=c.source.$treeScope.$id,d=i.prop("tagName"),"tr"===d.toLowerCase()?(m=angular.element(t.document.createElement(d)),$=angular.element(t.document.createElement("td")).addClass(Y.placeholderClass).attr("colspan",i[0].children.length),m.append($)):m=angular.element(t.document.createElement(d)).addClass(Y.placeholderClass),g=angular.element(t.document.createElement(d)),Y.hiddenClass&&g.addClass(Y.hiddenClass),p=n.positionStarted(h,i),m.css("height",i.prop("offsetHeight")+"px"),f=angular.element(t.document.createElement(a.$parentNodesScope.$element.prop("tagName"))).addClass(a.$parentNodesScope.$element.attr("class")).addClass(Y.dragClass),f.css("width",n.width(i)+"px"),f.css("z-index",9999),x=(i[0].querySelector(".angular-ui-tree-handle")||i[0]).currentStyle,x&&(document.body.setAttribute("ui-tree-cursor",o.find("body").css("cursor")||""),o.find("body").css({cursor:x.cursor+"!important"})),a.sourceOnly&&m.css("display","none"),i.after(m),i.after(g),c.isClone()&&a.sourceOnly?f.append(l):f.append(i),o.find("body").append(f),f.css({left:h.pageX-p.offsetX+"px",top:h.pageY-p.offsetY+"px"}),b={placeholder:m,dragging:f},D(),a.$apply(function(){a.$treeScope.$callbacks.dragStart(c.eventArgs(b,p))}),v=Math.max(P.scrollHeight,P.offsetHeight,z.clientHeight,z.scrollHeight,z.offsetHeight),S=Math.max(P.scrollWidth,P.offsetWidth,z.clientWidth,z.scrollWidth,z.offsetWidth))}}},y=function(e){var o,l,i,s,d,g,x,y,N,E,w,C,T,A,M,D,I,F,U,H,V,P,z,q,_=n.eventObj(e);if(f){if(e.preventDefault(),t.getSelection?t.getSelection().removeAllRanges():t.document.selection&&t.document.selection.empty(),i=_.pageX-p.offsetX,s=_.pageY-p.offsetY,i<0&&(i=0),s<0&&(s=0),s+10>v&&(s=v-10),i+10>S&&(i=S-10),f.css({left:i+"px",top:s+"px"}),h?(x=h.getBoundingClientRect(),d=h.scrollTop,g=d+h.clientHeight,x.bottom<_.clientY&&g<h.scrollHeight&&(M=Math.min(h.scrollHeight-g,10),h.scrollTop+=M),x.top>_.clientY&&d>0&&(D=Math.min(d,10),h.scrollTop-=D)):(d=window.pageYOffset||t.document.documentElement.scrollTop,g=d+(window.innerHeight||t.document.clientHeight||t.document.clientHeight),g<_.pageY&&g<v&&(M=Math.min(v-g,10),window.scrollBy(0,M)),d>_.pageY&&(D=Math.min(d,10),window.scrollBy(0,-D))),n.positionMoved(e,p,u),u)return void(u=!1);if(N=_.pageX-(t.pageXOffset||t.document.body.scrollLeft||t.document.documentElement.scrollLeft)-(t.document.documentElement.clientLeft||0),E=_.pageY-(t.pageYOffset||t.document.body.scrollTop||t.document.documentElement.scrollTop)-(t.document.documentElement.clientTop||0),angular.isFunction(f.hide)?f.hide():(w=f[0].style.display,f[0].style.display="none"),t.document.elementFromPoint(N,E),T=angular.element(t.document.elementFromPoint(N,E)),O=n.treeNodeHandlerContainerOfElement(T),O&&(T=angular.element(O)),angular.isFunction(f.show)?f.show():f[0].style.display=w,n.elementIsTree(T)?C=T.controller("uiTree").scope:n.elementIsTreeNodeHandle(T)?C=T.controller("uiTreeHandle").scope:n.elementIsTreeNode(T)?C=T.controller("uiTreeNode").scope:n.elementIsTreeNodes(T)?C=T.controller("uiTreeNodes").scope:n.elementIsPlaceholder(T)?C=T.controller("uiTreeNodes").scope:n.elementIsDropzone(T)?(C=T.controller("uiTree").scope,q=!0):T.controller("uiTreeNode")&&(C=T.controller("uiTreeNode").scope),U=C&&C.$treeScope&&C.$treeScope.$id&&C.$treeScope.$id===k,U&&p.dirAx)p.distX>0&&(o=c.prev(),o&&!o.collapsed&&o.accept(a,o.childNodesCount())&&(o.$childNodesScope.$element.append(m),c.moveTo(o.$childNodesScope,o.childNodes(),o.childNodesCount()))),p.distX<0&&(l=c.next(),l||(y=c.parentNode(),y&&y.$parentNodesScope.accept(a,y.index()+1)&&(y.$element.after(m),c.moveTo(y.$parentNodesScope,y.siblings(),y.index()+1))));else{if(A=!1,!C)return;if(!C.$treeScope||C.$parent.nodropEnabled||C.$treeScope.nodropEnabled||m.css("display",""),"uiTree"===C.$type&&C.dragEnabled&&(A=C.isEmpty()),"uiTreeHandle"===C.$type&&(C=C.$nodeScope),"uiTreeNode"!==C.$type&&!A&&!q)return void(Y.appendChildOnHover&&(l=c.next(),!l&&$&&(y=c.parentNode(),y.$element.after(m),c.moveTo(y.$parentNodesScope,y.siblings(),y.index()+1),$=!1)));X&&m.parent()[0]!=X.$element[0]&&(X.resetEmptyElement(),X.resetDropzoneElement(),X=null),A?(X=C,C.$nodesScope.accept(a,0)&&c.moveTo(C.$nodesScope,C.$nodesScope.childNodes(),0)):q?(X=C,C.$nodesScope.accept(a,C.$nodesScope.childNodes().length)&&c.moveTo(C.$nodesScope,C.$nodesScope.childNodes(),C.$nodesScope.childNodes().length)):C.dragEnabled()&&(angular.isDefined(a.expandTimeoutOn)&&a.expandTimeoutOn!==C.id&&(r.cancel(a.expandTimeout),delete a.expandTimeout,delete a.expandTimeoutOn,a.$callbacks.expandTimeoutCancel()),C.collapsed&&(a.expandOnHover===!0||angular.isNumber(a.expandOnHover)&&0===a.expandOnHover?(C.collapsed=!1,C.$treeScope.$callbacks.toggle(!1,C)):a.expandOnHover!==!1&&angular.isNumber(a.expandOnHover)&&a.expandOnHover>0&&angular.isUndefined(a.expandTimeoutOn)&&(a.expandTimeoutOn=C.$id,a.$callbacks.expandTimeoutStart(),a.expandTimeout=r(function(){a.$callbacks.expandTimeoutEnd(),C.collapsed=!1,C.$treeScope.$callbacks.toggle(!1,C)},a.expandOnHover))),T=C.$element,I=n.offset(T),V=n.height(T),P=C.$childNodesScope?C.$childNodesScope.$element:null,z=P?n.height(P):0,V-=z,H=Y.appendChildOnHover?.25*V:n.height(T)/2,F=_.pageY<I.top+H,C.$parentNodesScope.accept(a,C.index())?F?(T[0].parentNode.insertBefore(m[0],T[0]),c.moveTo(C.$parentNodesScope,C.siblings(),C.index())):Y.appendChildOnHover&&C.accept(a,C.childNodesCount())?(C.$childNodesScope.$element.prepend(m),c.moveTo(C.$childNodesScope,C.childNodes(),0),$=!0):(T.after(m),c.moveTo(C.$parentNodesScope,C.siblings(),C.index()+1)):!F&&C.accept(a,C.childNodesCount())&&(C.$childNodesScope.$element.append(m),c.moveTo(C.$childNodesScope,C.childNodes(),C.childNodesCount())))}a.$apply(function(){a.$treeScope.$callbacks.dragMove(c.eventArgs(b,p))})}},N=function(e){var n=c.eventArgs(b,p);e.preventDefault(),I(),r.cancel(a.expandTimeout),a.$treeScope.$apply(function(){l.when(a.$treeScope.$callbacks.beforeDrop(n)).then(function(e){e!==!1&&a.$$allowNodeDrop?(c.apply(),a.$treeScope.$callbacks.dropped(n)):M()})["catch"](function(){M()})["finally"](function(){g.replaceWith(a.$element),m.remove(),f&&(f.remove(),f=null),a.$treeScope.$callbacks.dragStop(n),a.$$allowNodeDrop=!1,c=null;var e=document.body.getAttribute("ui-tree-cursor");null!==e&&(o.find("body").css({cursor:e}),document.body.removeAttribute("ui-tree-cursor"))})})},E=function(e){a.dragEnabled()&&x(e)},w=function(e){y(e)},C=function(e){a.$$allowNodeDrop=!0,N(e)},T=function(e){N(e)},A=function(){var e;return{exec:function(n,t){t||(t=0),this.cancel(),e=r(n,t)},cancel:function(){r.cancel(e)}}}(),F=function(e){27===e.keyCode&&C(e)},M=function(){i.bind("touchstart mousedown",function(e){a.dragDelay>0?A.exec(function(){E(e)},a.dragDelay):E(e)}),i.bind("touchend touchcancel mouseup",function(){a.dragDelay>0&&A.cancel()})},M(),D=function(){angular.element(o).bind("touchend",C),angular.element(o).bind("touchcancel",C),angular.element(o).bind("touchmove",w),angular.element(o).bind("mouseup",C),angular.element(o).bind("mousemove",w),angular.element(o).bind("mouseleave",T),angular.element(o).bind("keydown",F)},I=function(){angular.element(o).unbind("touchend",C),angular.element(o).unbind("touchcancel",C),angular.element(o).unbind("touchmove",w),angular.element(o).unbind("mouseup",C),angular.element(o).unbind("mousemove",w),angular.element(o).unbind("mouseleave",T),angular.element(o).unbind("keydown",F)}}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNodes",["treeConfig","$window",function(e){return{require:["ngModel","?^uiTreeNode","^uiTree"],restrict:"A",scope:!0,controller:"TreeNodesController",link:function(n,t,o,r){var l={},a=r[0],i=r[1],s=r[2];angular.extend(l,e),l.nodesClass&&t.addClass(l.nodesClass),i?(i.scope.$childNodesScope=n,n.$nodeScope=i.scope):s.scope.$nodesScope=n,n.$treeScope=s.scope,a&&(a.$render=function(){n.$modelValue=a.$modelValue}),n.$watch(function(){return o.maxDepth},function(e){"number"==typeof e&&(n.maxDepth=e)}),n.$watch(function(){return o.nodropEnabled},function(e){"undefined"!=typeof e&&(n.nodropEnabled=!0)},!0)}}}])}(),function(){"use strict";function e(e,n){if(void 0===n)return null;for(var t=n.parentNode,o=1,r="function"==typeof t.setAttribute&&t.hasAttribute(e)?t:null;t&&"function"==typeof t.setAttribute&&!t.hasAttribute(e);){if(t=t.parentNode,r=t,t===document.documentElement){r=null;break}o++}return r}angular.module("ui.tree").factory("UiTreeHelper",["$document","$window","treeConfig",function(n,t,o){return{nodesData:{},setNodeAttribute:function(e,n,t){if(!e.$modelValue)return null;var o=this.nodesData[e.$modelValue.$$hashKey];o||(o={},this.nodesData[e.$modelValue.$$hashKey]=o),o[n]=t},getNodeAttribute:function(e,n){if(!e.$modelValue)return null;var t=this.nodesData[e.$modelValue.$$hashKey];return t?t[n]:null},nodrag:function(e){return"undefined"!=typeof e.attr("data-nodrag")&&"false"!==e.attr("data-nodrag")},eventObj:function(e){var n=e;return void 0!==e.targetTouches?n=e.targetTouches.item(0):void 0!==e.originalEvent&&void 0!==e.originalEvent.targetTouches&&(n=e.originalEvent.targetTouches.item(0)),n},dragInfo:function(e){return{source:e,sourceInfo:{cloneModel:e.$treeScope.cloneEnabled===!0?angular.copy(e.$modelValue):void 0,nodeScope:e,index:e.index(),nodesScope:e.$parentNodesScope},index:e.index(),siblings:e.siblings().slice(0),parent:e.$parentNodesScope,resetParent:function(){this.parent=e.$parentNodesScope},moveTo:function(e,n,t){this.parent=e,this.siblings=n.slice(0);var o=this.siblings.indexOf(this.source);o>-1&&(this.siblings.splice(o,1),this.source.index()<t&&t--),this.siblings.splice(t,0,this.source),this.index=t},parentNode:function(){return this.parent.$nodeScope},prev:function(){return this.index>0?this.siblings[this.index-1]:null},next:function(){return this.index<this.siblings.length-1?this.siblings[this.index+1]:null},isClone:function(){return this.source.$treeScope.cloneEnabled===!0},clonedNode:function(e){return angular.copy(e)},isDirty:function(){return this.source.$parentNodesScope!=this.parent||this.source.index()!=this.index},isForeign:function(){return this.source.$treeScope!==this.parent.$treeScope},eventArgs:function(e,n){return{source:this.sourceInfo,dest:{index:this.index,nodesScope:this.parent},elements:e,pos:n}},apply:function(){var e=this.source.$modelValue;this.parent.nodropEnabled||this.parent.$treeScope.nodropEnabled||this.isDirty()&&(this.isClone()&&this.isForeign()?this.parent.insertNode(this.index,this.sourceInfo.cloneModel):(this.source.remove(),this.parent.insertNode(this.index,e)))}}},height:function(e){return e.prop("scrollHeight")},width:function(e){return e.prop("scrollWidth")},offset:function(e){var o=e[0].getBoundingClientRect();return{width:e.prop("offsetWidth"),height:e.prop("offsetHeight"),top:o.top+(t.pageYOffset||n[0].body.scrollTop||n[0].documentElement.scrollTop),left:o.left+(t.pageXOffset||n[0].body.scrollLeft||n[0].documentElement.scrollLeft)}},positionStarted:function(e,n){var t={},o=e.pageX,r=e.pageY;return e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length>0&&(o=e.originalEvent.touches[0].pageX,r=e.originalEvent.touches[0].pageY),t.offsetX=o-this.offset(n).left,t.offsetY=r-this.offset(n).top,t.startX=t.lastX=o,t.startY=t.lastY=r,t.nowX=t.nowY=t.distX=t.distY=t.dirAx=0,t.dirX=t.dirY=t.lastDirX=t.lastDirY=t.distAxX=t.distAxY=0,t},positionMoved:function(e,n,t){var o,r=e.pageX,l=e.pageY;return e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length>0&&(r=e.originalEvent.touches[0].pageX,l=e.originalEvent.touches[0].pageY),n.lastX=n.nowX,n.lastY=n.nowY,n.nowX=r,n.nowY=l,n.distX=n.nowX-n.lastX,n.distY=n.nowY-n.lastY,n.lastDirX=n.dirX,n.lastDirY=n.dirY,n.dirX=0===n.distX?0:n.distX>0?1:-1,n.dirY=0===n.distY?0:n.distY>0?1:-1,o=Math.abs(n.distX)>Math.abs(n.distY)?1:0,t?(n.dirAx=o,void(n.moving=!0)):(n.dirAx!==o?(n.distAxX=0,n.distAxY=0):(n.distAxX+=Math.abs(n.distX),0!==n.dirX&&n.dirX!==n.lastDirX&&(n.distAxX=0),n.distAxY+=Math.abs(n.distY),0!==n.dirY&&n.dirY!==n.lastDirY&&(n.distAxY=0)),void(n.dirAx=o))},elementIsTreeNode:function(e){return"undefined"!=typeof e.attr("ui-tree-node")},elementIsTreeNodeHandle:function(e){return"undefined"!=typeof e.attr("ui-tree-handle")},elementIsTree:function(e){return"undefined"!=typeof e.attr("ui-tree")},elementIsTreeNodes:function(e){return"undefined"!=typeof e.attr("ui-tree-nodes")},elementIsPlaceholder:function(e){return e.hasClass(o.placeholderClass)},elementIsDropzone:function(e){return e.hasClass(o.dropzoneClass)},elementContainsTreeNodeHandler:function(e){return e[0].querySelectorAll("[ui-tree-handle]").length>=1},treeNodeHandlerContainerOfElement:function(n){return e("ui-tree-handle",n[0])}}}])}(),define("SeedModules.AngularUI/js/seed/angular-ui-tree",[],function(){}),define("SeedModules.AngularUI/modules/boot",["require","exports","angular","app/application","angular-ui-router","schema-form-bootstrap","SeedModules.AngularUI/js/seed/angular-ui-tree"],function(e,n,t){"use strict";return t.module("modules.angularui.boot",["ui.bootstrap","ui.tree","schemaForm"])}),define("SeedModules.AngularUI/modules/configs/httpConfig",["SeedModules.AngularUI/modules/boot"],function(e){"use strict";e.config(["$provide","$httpProvider",function(e,n){e.decorator("app/factories/httpDataHandler",["$delegate","$rootScope","$modal","$appEnvironment","app/services/popupService",function(e,n,t,o,r){return e.doResponse=function(n,t){n.config.dataOnly?t.resolve(n.data,n):n.data.success?t.resolve(n.data.data,n):e.doError($.extend(n,{statusText:n.data.message}),t)},e.doError=function(e,n){r.error(e.statusText),n.reject(e)},e}])}])}),define("SeedModules.AngularUI/modules/configs/location",["SeedModules.AngularUI/modules/boot"],function(e){"use strict";e.config(["$provide",function(e){e.decorator("$location",["$delegate",function(e){return e.search=function(e){var n,t,o=(e||window.location.search).substring(1).split(/[&?]/),r={};for(n=0;n<o.length;n++)t=o[n].split("="),t[1]&&(r[decodeURIComponent(t[0])]=decodeURIComponent(t[1]));return r},e}])}])}),define("SeedModules.AngularUI/modules/configs/ngTableDefaults",["require","exports","SeedModules.AngularUI/modules/boot"],function(e,n,t){"use strict";n.__esModule=!0;var o=JSON.parse(document.getElementById("seed-ui").getAttribute("data-site")),r={options:{},schema:{},params:{count:o.pageSize},settings:{counts:o.pageCounts.split(/[,?]/)}};t.value("SeedModules.AngularUI/modules/configs/ngTableDefaults",r)}),define("SeedModules.AngularUI/modules/configs/ngTableTemplates",["require","exports","SeedModules.AngularUI/modules/boot"],function(e,n,t){"use strict";n.__esModule=!0;var o=function(){function e(e){e.put("ng-table/header.html","<ng-table-sorter-row></ng-table-sorter-row>"),e.put("ng-table/pager.html",'<div class="ng-cloak ng-table-pager clearfix" ng-if="params.data.length"> <div ng-if="params.settings().counts.length" class="ng-table-counts btn-group pull-right"> <button ng-repeat="count in params.settings().counts" type="button" ng-class="{\'active\':params.count()==count}" ng-click="params.count(count)" class="btn btn-default"> <span ng-bind="count"></span> </button> </div> <ul class="pagination ng-table-pagination"> <li ng-class="{\'disabled\': !page.active && !page.current, \'active\': page.current}" ng-repeat="page in pages" ng-switch="page.type"> <a ng-switch-when="prev" ng-click="params.page(page.number)" href="">&laquo;</a> <a ng-switch-when="first" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a> <a ng-switch-when="page" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a> <a ng-switch-when="more" ng-click="params.page(page.number)" href="">&#8230;</a> <a ng-switch-when="last" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a> <a ng-switch-when="next" ng-click="params.page(page.number)" href="">&raquo;</a> </li> </ul> </div> '),e.put("ng-pager/pager.html",'<div class="ng-cloak ng-table-pager clearfix"> <div ng-if="params.settings().counts.length" class="ng-table-counts btn-group pull-right"> <button ng-repeat="count in params.settings().counts" type="button" ng-class="{\'active\':params.count()==count}" ng-click="params.count(count)" class="btn btn-default"> <span ng-bind="count"></span> </button> </div> <ul class="pagination ng-table-pagination"> <li ng-class="{\'disabled\': !page.active && !page.current, \'active\': page.current}" ng-repeat="page in pages" ng-switch="page.type"> <a ng-switch-when="prev" ng-click="params.page(page.number)" href="">&laquo;</a> <a ng-switch-when="first" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a> <a ng-switch-when="page" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a> <a ng-switch-when="more" ng-click="params.page(page.number)" href="">&#8230;</a> <a ng-switch-when="last" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a> <a ng-switch-when="next" ng-click="params.page(page.number)" href="">&raquo;</a> </li> </ul> </div> '),e.put("ng-table/sorterRow.html",'<tr> <th title="{{$column.headerTitle(this)}}" ng-repeat="$column in $columns" ng-class="{ \'sortable\': $column.sortable(this), \'sort-asc\': params.sorting()[$column.sortable(this)]==\'asc\', \'sort-desc\': params.sorting()[$column.sortable(this)]==\'desc\' }" ng-click="sortBy($column, $event)" ng-if="$column.show(this)" ng-init="template=$column.headerTemplateURL(this)" class="header {{$column.class(this)}}"> <div ng-if="!template" class="ng-table-header" ng-class="{\'sort-indicator\': params.settings().sortingIndicator==\'div\'}"> <span ng-bind="$column.title(this)" ng-class="{\'sort-indicator\': params.settings().sortingIndicator==\'span\'}"></span> </div> <div ng-if="template" ng-include="template"></div> </th> </tr> ')}return e.$inject=["$templateCache"],e}();t.run(o)}),define("SeedModules.AngularUI/modules/configs/schemaForm",["require","exports","SeedModules.AngularUI/modules/boot","angular"],function(e,n,t,o){"use strict";n.__esModule=!0;var r=function(){function e(e,n,t,r){var l=e.decorator("bootstrapDecorator"),a=function(e){if(e.form.compare){var n=e.fieldFrag.querySelector("[ng-model]");n&&n.setAttribute("sf-compare","")}};o.forEach(l,function(e,n){o.isArray(e.builder)&&e.builder.push(a)})}return e}(),l=function(){function e(e){}return e}();r.$inject=["schemaFormDecoratorsProvider","schemaFormProvider","sfBuilderProvider","sfPathProvider"],l.$inject=["$templateCache"],t.config(r).run(l)}),define("SeedModules.AngularUI/modules/configs/form/simplecolor",["SeedModules.AngularUI/modules/boot","schema-form-bootstrap"],function(e){"use strict";angular.module("schemaForm").config(["schemaFormDecoratorsProvider","schemaFormProvider","sfBuilderProvider","sfPathProvider",function(e,n,t,o){var r="/SeedModules.AngularUI/modules/templates/",l=function(e,t,r){if("string"===t.type&&"html"==t.format){var l=n.stdFormObj(e,t,r);return l.key=r.path,l.type="simplecolor",r.lookup[o.stringify(r.path)]=l,l}};n.defaults.string.unshift(l),e.addMapping("bootstrapDecorator","simplecolor",r+"simplecolor.html"),e.createDirective("simplecolor",r+"simplecolor.html")}])}),define("SeedModules.AngularUI/modules/configs/enums/extendFormFields",["require","exports"],function(e,n){"use strict";n.__esModule=!0;var t;!function(e){e.row="row",e.column="column",e.panel="panel",e.container="container",e.table="table",e["switch"]="switch",e.navbar="navbar"}(t=n.ExtendFormFields||(n.ExtendFormFields={}))}),define("SeedModules.AngularUI/modules/configs/form/switchField",["require","exports","SeedModules.AngularUI/modules/boot","SeedModules.AngularUI/modules/configs/enums/extendFormFields"],function(e,n,t,o){"use strict";n.__esModule=!0;var r=function(){function e(e,n,t){var r="/SeedModules.AngularUI/modules/templates/form/",l=function(e,r,l){if("boolean"===r.type&&"html"==r.format){var a=n.stdFormObj(e,r,l);return a.key=l.path,a.type=o.ExtendFormFields["switch"],l.lookup[t.stringify(l.path)]=a,a}};n.defaults["boolean"].push(l),e.addMapping("bootstrapDecorator",o.ExtendFormFields["switch"],r+"switchField.html"),e.createDirective(o.ExtendFormFields["switch"],r+"switchField.html")}return e.$inject=["schemaFormDecoratorsProvider","schemaFormProvider","sfPathProvider"],e}();t.config(r)}),define("SeedModules.AngularUI/modules/configs/form/layout",["require","exports","SeedModules.AngularUI/modules/boot","SeedModules.AngularUI/modules/configs/enums/extendFormFields"],function(e,n,t,o){"use strict";n.__esModule=!0;var r="/SeedModules.AngularUI/modules/templates/form/",l=function(){function e(e,n,t,l){var a=[l.builders.sfField,l.builders.ngModelOptions,l.builders.condition,l.builders.transclusion];e.defineAddOn("bootstrapDecorator",o.ExtendFormFields.row,r+"row.html",a),e.defineAddOn("bootstrapDecorator",o.ExtendFormFields.column,r+"column.html",a),e.defineAddOn("bootstrapDecorator",o.ExtendFormFields.navbar,r+"navbar.html",a)}return e.$inject=["schemaFormDecoratorsProvider","schemaFormProvider","sfPathProvider","sfBuilderProvider"],e}();t.config(l).run(["$templateCache",function(e){e.put(r+"row.html",'<div class="row" sf-field-transclude="items"></div>'),e.put(r+"column.html",'<div class="col-md-{{form.flex}} col-lg-{{form.flex}} col-sm-{{form.flex}} col-xs-{{flex}}" sf-field-transclude="items"></div>'),e.put(r+"navbar.html",'<div class="navbar navbar-{{form.theme}} {{form.htmlClass}}" style="margin: 0" sf-field-transclude="items"></div>'),e.put("decorators/bootstrap/tabs.html",'<div ng-init="selected = { tab: 0 }" class="schema-form-tabs {{form.htmlClass}}"><ul class="nav nav-tabs"><li ng-repeat="tab in form.tabs" ng-disabled="form.readonly" ng-click="$event.preventDefault() || (selected.tab = $index)" ng-class="{active: selected.tab === $index}"><a href="#"> <i ng-if="tab.titleIcon && tab.titleIcon.length>0" class="{{tab.titleIcon}}"></i> {{ tab.title }}</a></li></ul><div class="tab-content {{form.fieldHtmlClass}}"></div></div>')}])}),define("SeedModules.AngularUI/modules/configs/form/panel",["require","exports","SeedModules.AngularUI/modules/boot","SeedModules.AngularUI/modules/configs/enums/extendFormFields"],function(e,n,t,o){"use strict";n.__esModule=!0;var r="/SeedModules.AngularUI/modules/templates/form/",l=function(){function e(e,n){var t=[n.builders.sfField,n.builders.ngModelOptions,n.builders.condition,n.builders.transclusion];e.defineAddOn("bootstrapDecorator",o.ExtendFormFields.panel,r+"panel.html",t),e.defineAddOn("bootstrapDecorator",o.ExtendFormFields.container,r+"container.html",t);
}return e.$inject=["schemaFormDecoratorsProvider","sfBuilderProvider"],e}();t.config(l).run(["$templateCache",function(e){e.put(r+"panel.html",'<div class="schema-form-panel panel panel-{{form.theme}} {{form.htmlClass}}"><div ng-if="!form.notitle" class="panel-heading"> <i ng-if="form.titleIcon && form.titleIcon.length>0" class="{{form.titleIcon}}"></i> <span ng-bind="form.title"></span></div><div sf-field-transclude="items"></div></div>'),e.put(r+"container.html",'<div class="panel-body {{form.htmlClass}}" sf-field-transclude="items"></div>')}])}),define("SeedModules.AngularUI/modules/configs/form/table",["require","exports","SeedModules.AngularUI/modules/boot","SeedModules.AngularUI/modules/configs/enums/extendFormFields"],function(e,n,t,o){"use strict";n.__esModule=!0;var r="/SeedModules.AngularUI/modules/templates/form/",l=function(){function e(e,n){var t=[n.builders.sfField,n.builders.ngModelOptions,n.builders.condition,n.builders.transclusion];e.defineAddOn("bootstrapDecorator",o.ExtendFormFields.table,r+"table.html",t)}return e.$inject=["schemaFormDecoratorsProvider","sfBuilderProvider"],e}();t.config(l).run(["$templateCache",function(e){e.put(r+"table.html",'<table class="table" ng-table-dynamic="form.tableParams with form.tableColumns"><tr ng-repeat="row in $data"><td ng-repeat="col in $columns">{{row[col.field]}}</td></tr></table>')}])}),define("SeedModules.AngularUI/modules/providers/ngTableDefaultGetData",["require","exports","SeedModules.AngularUI/modules/boot"],function(e,n,t){"use strict";n.__esModule=!0;var o=function(){function e(){this.filterFilterName="filter",this.sortingFilterName="orderBy",this.$get.$inject=["$filter"]}return e.prototype.$get=function(e){function n(n,t){if(null==n)return[];var o=t.hasFilter()?e(this.filterFilterName)(n,t.filter(!0)):n,r=t.orderBy(),l=r.length?e(this.sortingFilterName)(o,r):o,a=l.slice((t.page()-1)*t.count(),t.page()*t.count());return t.total(l.length),a}return n},e}();t.provider("SeedModules.AngularUI/modules/providers/ngTableDefaultGetData",o)}),define("SeedModules.AngularUI/modules/configs/schemaFormDefaults",["require","exports","SeedModules.AngularUI/modules/boot"],function(e,n,t){"use strict";n.__esModule=!0;var o={schema:{},options:{validateOnRender:!0,validationMessage:{0:"错误的类型: {{schema.type}} (应为 {{form.type}})",302:"{{title}} 不可为空",101:"值 {{viewValue}} 小于最小值 {{schema.minimum}}",103:"值 {{viewValue}} 大于最大值 {{schema.maximum}}",200:"字符串太短 (当前 {{viewValue.length}} 个字), 最小 {{schema.minLength}}",201:"字符串太长 (当前 {{viewValue.length}} 个字), 最大 {{schema.maxLength}}",202:"输入的格式不正确"}}};t.value("SeedModules.AngularUI/modules/configs/schemaFormDefaults",o)}),define("SeedModules.AngularUI/modules/module",["require","exports","angular","SeedModules.AngularUI/modules/configs/httpConfig","SeedModules.AngularUI/modules/configs/location","SeedModules.AngularUI/modules/configs/ngTableDefaults","SeedModules.AngularUI/modules/configs/ngTableTemplates","SeedModules.AngularUI/modules/configs/schemaForm","SeedModules.AngularUI/modules/configs/form/simplecolor","SeedModules.AngularUI/modules/configs/form/switchField","SeedModules.AngularUI/modules/configs/form/layout","SeedModules.AngularUI/modules/configs/form/panel","SeedModules.AngularUI/modules/configs/form/table","SeedModules.AngularUI/modules/providers/ngTableDefaultGetData","SeedModules.AngularUI/modules/configs/schemaFormDefaults"],function(e,n,t){"use strict";var o=function(){function e(e,n){var t=JSON.parse(document.getElementById("seed-ui").getAttribute("data-site"));t.prefix=t.prefix?"/"+t.prefix:"",n.siteSettings=t}return e.$inject=["$provide","$appConfig"],e}();return t.module("template/modal/window.html",[]).run(["$templateCache",function(e){e.put("template/modal/window.html",'<div tabindex="-1" role="dialog" class="modal fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog modal-{{size}}"><div class="modal-content" modal-transclude></div></div>\n</div>')}]),t.module("modules.angularui",["modules.angularui.boot"]).config(o)});