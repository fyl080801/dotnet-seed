define("app/factories",[],function(){"use strict";return angular.module("app.factories",[])}),define("app/factories/httpState",["app/factories"],function(e){"use strict";e.factory("app.factories.httpState",["$q","$appEnvironment",function(e,t){return{request:function(e){return t.ajaxState={loading:!0,url:e.url,method:e.method,data:e.data},e},requestError:function(e){return t.ajaxState={loading:!1,url:null,method:null,data:null},e},response:function(e){return t.ajaxState={loading:!1,url:null,method:null,data:null},e},responseError:function(e){return t.ajaxState={loading:!1,url:null,method:null,data:null},e}}}])}),define("app/factories/httpDataHandler",["app/factories"],function(e){"use strict";e.factory("app.factories.httpDataHandler",["$modal",function(e){var t={doResponse:function(e,n){e.data=e.data?e.data:{},e.data&&e.data.success===!1?t.doError(e,n):n.resolve(e.data)},doError:function(t,n){t.data=t.data?t.data:{},e.open({templateUrl:"templates/modal/Error.html",data:{text:t.data.message}}),n.reject(t.data)}};return t}])}),define("app/configs",[],function(){"use strict";return angular.module("app.configs",["ui.router"])}),define("app/configs/appConfig",["app/configs"],function(configs){"use strict";configs.config(["$provide",function($provide){var app=$("#app").length>0?$("#app"):null;$provide.constant("$appConfig",{serverUrl:app?app.attr("data-server"):"",debug:!!app&&!!eval(app.attr("data-debug"))})}])}),define("app/configs/dependencyLoader",["require","app/configs"],function(e,t){"use strict";t.config(["$stateProvider",function(t){function n(t){return"string"==typeof t&&(t=[t]),["$q",function(n){var r=n.defer();return e(t,function(){r.resolve(arguments)}),r.promise}]}var r=t.state;t.state=function(e,t){var o=t.requires?t.requires:t.dependencies?t.dependencies:[];if(o.length>0){var a=t.resolve||{};a.$deps=n(o),t.resolve=a}return r(e,t)}}])}),define("app/configs/appEnvironment",["app/configs"],function(e){"use strict";e.config(["$provide",function(e){e.constant("$appEnvironment",{ajaxState:{loading:!1,url:null,method:null,data:null},theme:null})}])}),define("app/configs/rootScope",["app/configs"],function(e){"use strict";e.config(["$provide",function(e){e.decorator("$rootScope",["$delegate","$appEnvironment",function(e,t){return e.$appEnvironment=t,e}])}])}),define("app/configs/modal",["app/configs"],function(e){"use strict";e.constant("app.configs.modal",{modals:{},_counter:0}).config(["$provide","app.configs.modal",function(e,t){e.decorator("$modal",["$delegate","$rootScope",function(e,n){var r=e.open;return e.closeAll=function(){for(var e in t.modals)t.modals[e].dismiss()},e.open=function(o){o.isolate=void 0===o.isolate||o.isolate,o.scope=o.scope?o.scope:n.$new(o.isolate),o.scope.$data=o.data?o.data:o.scope.$data?o.scope.$data:{},o.scope.$handlers=o.handlers?o.handlers:o.scope.$handlers?o.scope.$handlers:{},o.scope.$stores=o.stores?o.stores:o.scope.$stores?o.scope.$stores:{},o.backdrop=o.backdrop?o.backdrop:"static",o.single===!0&&e.closeAll();var a=r(o);return a.index=++t._counter,a.result.then(function(){delete t.modals[a.index]},function(){delete t.modals[a.index]}),t.modals[t._counter]=a,a},e}])}])}),define("app/configs/http",["app/configs"],function(e){"use strict";e.config(["$httpProvider",function(e){e.defaults.headers.get=e.defaults.headers.get?e.defaults.headers.get:{},e.defaults.headers.get["If-Modified-Since"]="Mon, 26 Jul 1997 05:00:00 GMT",e.defaults.headers.get["Cache-Control"]="no-cache",e.defaults.headers.get.Pragma="no-cache",e.interceptors.push("app.factories.httpState"),jQuery.support.cors=!0}])}),define("app/services",[],function(){"use strict";return angular.module("app.services",[])}),define("app/services/ajaxService",["app/services"],function(e){"use strict";e.service("app.services.ajaxService",["$q","$modal","$appConfig","app.factories.httpDataHandler",function(e,t,n,r){var o=this;this.resolveUrl=function(e){return 0===e.indexOf("http://")||0===e.indexOf("https://")?e:n.serverUrl+e},this.get=function(t){var n=e.defer();return $.ajax({type:"GET",url:o.resolveUrl(t),success:function(e){r.doResponse({data:e},n)},error:function(e){r.doError({data:e},n)}}),n.promise},this.post=function(t,n){var a=e.defer();return $.ajax({type:"POST",data:n,url:o.resolveUrl(t),success:function(e){r.doResponse({data:e},a)},error:function(e){r.doError({data:e},a)}}),a.promise},this.json=function(t,n){var a=e.defer();return $.ajax({type:"POST",contentType:"application/json",dataType:"json",data:n,url:o.resolveUrl(t),success:function(e){r.doResponse({data:e},a)},error:function(e){r.doError({data:e},a)}}),a.promise}}])}),define("app/services/httpService",["app/services"],function(e){"use strict";e.service("app.services.httpService",["$http","$q","$modal","$appConfig","app.factories.httpDataHandler",function(e,t,n,r,o){var a=this;this.resolveUrl=function(e){return 0===e.indexOf("http://")||0===e.indexOf("https://")?e:r.serverUrl+e},this.get=function(n){var r=t.defer(),i=t.defer();return e({method:"get",url:a.resolveUrl(n),withCredentials:!1,timeout:i.promise}).then(function(e){o.doResponse(e,r)},function(e){o.doError(e,r)}),r.promise.cancel=function(){i.resolve()},r.promise},this.post=function(n,r){var i=t.defer(),s=t.defer();return e({method:"post",data:r,url:a.resolveUrl(n),withCredentials:!1,timeout:s.promise,headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(e){o.doResponse(e,i)},function(e){o.doError(e,i)}),i.promise.cancel=function(){s.resolve()},i.promise},this.jsonp=function(n,r){var i=t.defer(),s=t.defer();return e({method:"jsonp",data:r,url:a.resolveUrl(n),withCredentials:!1,timeout:s.promise}).then(function(e){o.doResponse(e,i)},function(e){o.doError(e,i)}),i.promise.cancel=function(){s.resolve()},i.promise}}])}),define("app/services/popupService",["app/services"],function(e){"use strict";var t='<div><div class="modal-header"><h4 class="modal-title"><i class="glyphicon glyphicon-info-sign"></i>&nbsp;消息</h4></div><div class="modal-body"><p ng-if="$data.text">{{$data.text}}</p><ul ng-if="$data.contents"><li ng-repeat="content in $data.contents track by $index">{{content}}</li></ul></div><div class="modal-footer"><button class="btn btn-primary" type="button" ng-click="$close()"><i class="glyphicon glyphicon-ok-sign"></i>&nbsp;确定</button></div></div>',n='<div><div class="modal-header"><h4 class="modal-title"><i class="glyphicon glyphicon-remove-sign"></i>&nbsp;错误</h4></div><div class="modal-body"><p ng-if="$data.text">{{$data.text}}</p><ul ng-if="$data.contents"><li ng-repeat="content in $data.contents track by $index">{{content}}</li></ul></div><div class="modal-footer"><button class="btn btn-primary" type="button" ng-click="$close()"><i class="glyphicon glyphicon-ok-sign"></i>&nbsp;确定</button></div></div>',r='<div><div class="modal-header"><h4 class="modal-title"><span class="glyphicon glyphicon-question-sign"></span>&nbsp;确认</h4></div><div class="modal-body clearfix"><p ng-if="$data.text">{{$data.text}}</p><ul ng-if="$data.contents"><li ng-repeat="content in $data.contents track by $index">{{content}}</li></ul></div><div class="modal-footer"><button class="btn btn-primary" type="button" ng-click="$close(true)"><i class="glyphicon glyphicon-ok-sign"></i>&nbsp;确定</button><button class="btn btn-default" type="button" ng-click="$dismiss()"><i class="glyphicon glyphicon-remove-sign"></i>&nbsp;取消</button></div></div>';e.service("app.services.popupService",["$modal","$q",function(e,o){this.information=function(n,r){var a=o.defer();return e.open({template:t,size:r?r:"sm",data:{text:n?n:"操作成功"}}).result.then(function(e){a.resolve()}),a.promise},this.confirm=function(t,n){var a=o.defer();return a.promise.ok=function(e){return a.promise.then(e),a.promise},a.promise.cancel=function(e){return a.promise["catch"](e),a.promise},e.open({template:r,size:n?n:"sm",data:{text:t?t:"是否确认操作？"}}).result.then(function(e){e===!0?a.resolve(e):a.reject(e)}),a.promise},this.error=function(t,r){var a=o.defer(),i={};return null===t||void 0===t?i.text="发生错误":"[object Array]"===Object.prototype.toString.call(t)?i.contents=t:i.text=t,e.open({template:n,size:r?r:"sm",data:i}).result.then(function(e){a.resolve(e)}),a.promise}}])}),define("app/directives",[],function(){"use strict";return angular.module("app.directives",[])}),define("app/directives/title",["app/directives"],function(e){"use strict";e.directive("title",["$rootScope","$timeout",function(e,t){var n=function(n,r,o){e.$on("$stateChangeSuccess",function(e,n){t(function(){document.title=n.data&&n.data.title?n.data.title:""})})};return{restrict:"E",link:n}}])}),define("app/directives/theme",["app/directives"],function(e){"use strict";e.directive("theme",[function(){var e=function(e,t,n,r){},t=function(e,t,n,r){e.$appEnvironment=r};return{scope:{normal:"@",path:"@"},restrict:"AE",replace:!0,link:e,controller:["$scope","$element","$attrs","$appEnvironment",t],template:'<link ng-href="{{path}}/{{$appEnvironment.theme?$appEnvironment.theme:normal}}.css" rel="stylesheet" />'}}])}),define("app/directives/equals",["app/directives"],function(e){"use strict";e.directive("equals",[function(){function e(e,t,n,r){function o(t){var o=t===e.$eval(n.equals);return r.$setValidity("equal",o),o?t:null}r.$parsers.push(o),r.$formatters.push(o),e.$watch(n.equals,function(){r.$setViewValue(r.$viewValue)})}return{require:"ngModel",link:e}}])}),define("app/routes",["angular-ui-router"],function(){"use strict";return angular.module("app.routes",["ui.router"]).config(["$urlRouterProvider","$stateProvider",function(e,t){}])}),define("app/routes/run",["app/routes"],function(e){"use strict";e.run(["$rootScope","$state","$stateParams",function(e,t,n){e.$state=t,e.$stateParams=n,e.$on("$stateChangeStart",function(e,t,n,r,o){}),e.$on("$stateChangeSuccess",function(t,n,r,o,a){e.$previous=o,e.$previousParams=a}),t.back=function(){e.$previous&&t.go(e.$previous.name,e.$previousParams)}}])}),define("app/application",["angular","jquery","bootstrap","ui-bootstrap-tpls","app/factories/httpState","app/factories/httpDataHandler","app/configs/appConfig","app/configs/dependencyLoader","app/configs/appEnvironment","app/configs/rootScope","app/configs/modal","app/configs/http","app/services/ajaxService","app/services/httpService","app/services/popupService","app/directives/title","app/directives/theme","app/directives/equals","app/routes/run"],function(){"use strict";var e=angular.module;return angular.module=function(t,n,r){var o=e(t,n,r);return o.config(["$controllerProvider","$compileProvider","$filterProvider","$provide",function(e,t,n,r){o.controller=e.register,o.directive=t.directive,o.filter=n.register,o.factory=r.factory,o.service=r.service}]),o},angular.module("app.application",["ui.bootstrap","app.configs","app.factories","app.services","app.routes","app.directives"])});