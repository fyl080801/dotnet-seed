define("SeedModules.Saas/modules/controllers/tenants",["SeedModules.Saas/modules/module"],function(e){"use strict";e.controller("SeedModules.Saas/modules/controllers/tenants",["$scope","$modal","app/services/popupService","SeedModules.AngularUI/modules/factories/ngTableRequest","SeedModules.AngularUI/modules/services/requestService","SeedModules.AngularUI/modules/factories/schemaFormParams",function(e,s,t,l,o,r){e.search={keyword:""},e.tableParams=new l({url:"/api/tenant",showLoading:!1,data:e.search}).ngTableParams(),e.formParams=(new r).properties({name:{title:"名称",type:"string",required:!0},requestUrlPrefix:{title:"Url前缀",type:"string"},requestUrlHost:{title:"主机",type:"string"},databaseProvider:{title:"数据库类型",type:"string",required:!0},tablePrefix:{title:"表前缀",type:"string",required:!0},mysql_Server:{title:"服务地址",type:"string",required:!0},mysql_Database:{title:"数据库名称",type:"string",required:!0},mysql_Username:{title:"用户名",type:"string",required:!0},mysql_Password:{title:"密码",type:"string",required:!0},mysql_Port:{title:"端口号",type:"string"},mysql_Ssl:{title:"SSL",type:"boolean"},mssql_Server:{title:"服务地址",type:"string",required:!0},mssql_Database:{title:"数据库名称",type:"string",required:!0},mssql_Username:{title:"用户名",type:"string",required:!0},mssql_Password:{title:"密码",type:"string",required:!0}}),e.form=["name",{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:["requestUrlPrefix"]},{type:"section",htmlClass:"col-xs-6",items:["requestUrlHost"]}]},{type:"section",htmlClass:"row",items:[{type:"section",htmlClass:"col-xs-6",items:[{key:"databaseProvider",type:"select",titleMap:[{value:"SqlConnection",name:"Microsoft SQLServer"},{value:"MySql",name:"MySql Database"}]}]},{type:"section",htmlClass:"col-xs-6",items:["tablePrefix"]}]},{type:"section",htmlClass:"row",condition:"model.databaseProvider==='MySql'",items:[{type:"section",htmlClass:"col-xs-6",items:["mysql_Server"]},{type:"section",htmlClass:"col-xs-6",items:["mysql_Database"]},{type:"section",htmlClass:"col-xs-6",items:["mysql_Username"]},{type:"section",htmlClass:"col-xs-6",items:[{key:"mysql_Password",type:"password"}]},{type:"section",htmlClass:"col-xs-6",items:["mysql_Port"]},{type:"section",htmlClass:"col-xs-6",items:[{key:"mysql_Ssl",type:"switch",trueText:"开",falseText:"关"}]}]},{type:"section",htmlClass:"row",condition:"model.databaseProvider==='SqlConnection'",items:[{type:"section",htmlClass:"col-xs-6",items:["mssql_Server"]},{type:"section",htmlClass:"col-xs-6",items:["mssql_Database"]},{type:"section",htmlClass:"col-xs-6",items:["mssql_Username"]},{type:"section",htmlClass:"col-xs-6",items:[{key:"mssql_Password",type:"password"}]}]}],e.checkedAll=!1,e.checked={},e.checkAll=function(){e.checkedAll=!e.checkedAll,e.checkedAll?$.each(e.tableParams.data,function(s,t){e.checked[t.name]=!0}):$.each(e.tableParams.data,function(s,t){e.checked[t.name]=!1})},e.onCheck=function(){e.checkedAll=!0,$.each(e.tableParams.data,function(s,t){if(!e.checked[t.name])return e.checkedAll=!1,!1})},e.create=function(){s.open({templateUrl:"/SeedModules.AngularUI/modules/views/schemaConfirm.html",data:{title:"租户信息",formParams:e.formParams,form:e.form,model:{}}}).result.then(function(s){switch(s.databaseProvider){case"SqlConnection":s.connectionString="Data Source="+s.mssql_Server+";Initial Catalog="+s.mssql_Database+";User ID="+s.mssql_Username+";Password="+s.mssql_Password+";";break;case"MySql":s.connectionString="server="+s.mysql_Server+";database="+s.mysql_Database+";uid="+s.mysql_Username+";pwd="+s.mysql_Password+";",s.mysql_Port&&""!==s.mysql_Port&&(s.connectionString=s.connectionString+"port="+s.mysql_Port+";"),s.mysql_Ssl||(s.connectionString=s.connectionString+"SslMode=none;");break;default:s.connectionString=""}o.url("/api/tenant/info").post(s).result.then(function(s){e.tableParams.reload()})})},e.drop=function(){t.confirm("是否删除？").ok(function(){})},e.keywordCallback=function(){}}])}),define("SeedModules.Saas/modules/controllers/projects",["SeedModules.Saas/modules/module"],function(e){"use strict";e.controller("SeedModules.Saas/modules/controllers/projects",["$scope",function(e){}])}),define("SeedModules.Saas/modules/controllers/datasources",["SeedModules.Saas/modules/module"],function(e){"use strict";e.controller("SeedModules.Saas/modules/controllers/datasources",["$scope",function(e){}])}),define("SeedModules.Saas/modules/filters/tenantState",["SeedModules.Saas/modules/module"],function(e){"use strict";e.filter("tenantState",[function(){var e=["未初始化","初始化中","运行中","已禁用","异常"];return function(s){return e[s]}}])}),define("SeedModules.Saas/modules/requires",["require","exports","SeedModules.Saas/modules/controllers/tenants","SeedModules.Saas/modules/controllers/projects","SeedModules.Saas/modules/controllers/datasources","SeedModules.Saas/modules/filters/tenantState"],function(e,s){"use strict";s.__esModule=!0});