"use strict";!function(e){var t={parse:function(e){if("string"!=typeof e)throw new TypeError("ObjectPath.parse must be passed a string");for(var t,r,i,n,a=0,o=[];a<e.length;)if(t=e.indexOf(".",a),r=e.indexOf("[",a),t===-1&&r===-1)o.push(e.slice(a,e.length)),a=e.length;else if(r===-1||t!==-1&&t<r)o.push(e.slice(a,t)),a=t+1;else if(r>a&&(o.push(e.slice(a,r)),a=r),i=e.slice(r+1,r+2),'"'!==i&&"'"!==i)n=e.indexOf("]",r),n===-1&&(n=e.length),o.push(e.slice(a+1,n)),a="."===e.slice(n+1,n+2)?n+2:n+1;else{for(n=e.indexOf(i+"]",r),n===-1&&(n=e.length);"\\"===e.slice(n-1,n)&&r<e.length;)r++,n=e.indexOf(i+"]",r);o.push(e.slice(a+2,n).replace(new RegExp("\\"+i,"g"),i)),a="."===e.slice(n+2,n+3)?n+3:n+2}return o},stringify:function(e,t){return Array.isArray(e)||(e=[e.toString()]),t='"'===t?'"':"'",e.map(function(e){return"["+t+e.toString().replace(new RegExp(t,"g"),"\\"+t)+t+"]"}).join("")},normalize:function(e,r){return t.stringify(Array.isArray(e)?e:t.parse(e),r)},registerModule:function(e){e.module("ObjectPath",[]).provider("ObjectPath",function(){this.parse=t.parse,this.stringify=t.stringify,this.normalize=t.normalize,this.$get=function(){return t}})}};"function"==typeof define&&define.amd?define("objectpath",[],function(){return t}):"object"==typeof exports?exports.ObjectPath=t:window.ObjectPath=t}(),function(e,t){"function"==typeof define&&define.amd?define("tv4",[],t):"undefined"!=typeof module&&module.exports?module.exports=t():e.tv4=t()}(this,function(){function e(t,r){if(t===r)return!0;if("object"==typeof t&&"object"==typeof r){if(Array.isArray(t)!==Array.isArray(r))return!1;if(Array.isArray(t)){if(t.length!==r.length)return!1;for(var i=0;i<t.length;i++)if(!e(t[i],r[i]))return!1}else{var n;for(n in t)if(void 0===r[n]&&void 0!==t[n])return!1;for(n in r)if(void 0===t[n]&&void 0!==r[n])return!1;for(n in t)if(!e(t[n],r[n]))return!1}return!0}return!1}function t(e){var t=String(e).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return t?{href:t[0]||"",protocol:t[1]||"",authority:t[2]||"",host:t[3]||"",hostname:t[4]||"",port:t[5]||"",pathname:t[6]||"",search:t[7]||"",hash:t[8]||""}:null}function r(e,r){function i(e){var t=[];return e.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(e){"/.."===e?t.pop():t.push(e)}),t.join("").replace(/^\//,"/"===e.charAt(0)?"/":"")}return r=t(r||""),e=t(e||""),r&&e?(r.protocol||e.protocol)+(r.protocol||r.authority?r.authority:e.authority)+i(r.protocol||r.authority||"/"===r.pathname.charAt(0)?r.pathname:r.pathname?(e.authority&&!e.pathname?"/":"")+e.pathname.slice(0,e.pathname.lastIndexOf("/")+1)+r.pathname:e.pathname)+(r.protocol||r.authority||r.pathname?r.search:r.search||e.search)+r.hash:null}function i(e){return e.split("#")[0]}function n(e,t){if(e&&"object"==typeof e)if(void 0===t?t=e.id:"string"==typeof e.id&&(t=r(t,e.id),e.id=t),Array.isArray(e))for(var i=0;i<e.length;i++)n(e[i],t);else{"string"==typeof e.$ref&&(e.$ref=r(t,e.$ref));for(var a in e)"enum"!==a&&n(e[a],t)}}function a(e,t,r,i,n){if(Error.call(this),void 0===e)throw new Error("No code supplied for error: "+t);this.message=t,this.code=e,this.dataPath=r||"",this.schemaPath=i||"",this.subErrors=n||null;var a=new Error(this.message);if(this.stack=a.stack||a.stacktrace,!this.stack)try{throw a}catch(a){this.stack=a.stack||a.stacktrace}}function o(e,t){if(t.substring(0,e.length)===e){var r=t.substring(e.length);if(t.length>0&&"/"===t.charAt(e.length-1)||"#"===r.charAt(0)||"?"===r.charAt(0))return!0}return!1}function s(e){var t=new l,a=e||"en",o={addFormat:function(){t.addFormat.apply(t,arguments)},language:function(e){return e?(c[e]||(e=e.split("-")[0]),!!c[e]&&(a=e,e)):a},addLanguage:function(e,t){var r;for(r in d)t[r]&&!t[d[r]]&&(t[d[r]]=t[r]);var i=e.split("-")[0];if(c[i]){c[e]=Object.create(c[i]);for(r in t)"undefined"==typeof c[i][r]&&(c[i][r]=t[r]),c[e][r]=t[r]}else c[e]=t,c[i]=t;return this},freshApi:function(e){var t=s();return e&&t.language(e),t},validate:function(e,r,i,n){var o=new l(t,(!1),c[a],i,n);"string"==typeof r&&(r={$ref:r}),o.addSchema("",r);var s=o.validateAll(e,r,null,null,"");return!s&&n&&(s=o.banUnknownProperties()),this.error=s,this.missing=o.missing,this.valid=null===s,this.valid},validateResult:function(){var e={};return this.validate.apply(e,arguments),e},validateMultiple:function(e,r,i,n){var o=new l(t,(!0),c[a],i,n);"string"==typeof r&&(r={$ref:r}),o.addSchema("",r),o.validateAll(e,r,null,null,""),n&&o.banUnknownProperties();var s={};return s.errors=o.errors,s.missing=o.missing,s.valid=0===s.errors.length,s},addSchema:function(){return t.addSchema.apply(t,arguments)},getSchema:function(){return t.getSchema.apply(t,arguments)},getSchemaMap:function(){return t.getSchemaMap.apply(t,arguments)},getSchemaUris:function(){return t.getSchemaUris.apply(t,arguments)},getMissingUris:function(){return t.getMissingUris.apply(t,arguments)},dropSchemas:function(){t.dropSchemas.apply(t,arguments)},defineKeyword:function(){t.defineKeyword.apply(t,arguments)},defineError:function(e,t,r){if("string"!=typeof e||!/^[A-Z]+(_[A-Z]+)*$/.test(e))throw new Error("Code name must be a string in UPPER_CASE_WITH_UNDERSCORES");if("number"!=typeof t||t%1!==0||t<1e4)throw new Error("Code number must be an integer > 10000");if("undefined"!=typeof d[e])throw new Error("Error already defined: "+e+" as "+d[e]);if("undefined"!=typeof f[t])throw new Error("Error code already used: "+f[t]+" as "+t);d[e]=t,f[t]=e,u[e]=u[t]=r;for(var i in c){var n=c[i];n[e]&&(n[t]=n[t]||n[e])}},reset:function(){t.reset(),this.error=null,this.missing=[],this.valid=!0},missing:[],error:null,valid:!0,normSchema:n,resolveUrl:r,getDocumentUri:i,errorCodes:d};return o}Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=r.length;return function(n){if("object"!=typeof n&&"function"!=typeof n||null===n)throw new TypeError("Object.keys called on non-object");var a=[];for(var o in n)e.call(n,o)&&a.push(o);if(t)for(var s=0;s<i;s++)e.call(n,r[s])&&a.push(r[s]);return a}}()),Object.create||(Object.create=function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}()),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var t=Object(this),r=t.length>>>0;if(0===r)return-1;var i=0;if(arguments.length>1&&(i=Number(arguments[1]),i!==i?i=0:0!==i&&i!==1/0&&i!==-(1/0)&&(i=(i>0||-1)*Math.floor(Math.abs(i)))),i>=r)return-1;for(var n=i>=0?i:Math.max(r-Math.abs(i),0);n<r;n++)if(n in t&&t[n]===e)return n;return-1}),Object.isFrozen||(Object.isFrozen=function(e){for(var t="tv4_test_frozen_key";e.hasOwnProperty(t);)t+=Math.random();try{return e[t]=!0,delete e[t],!1}catch(r){return!0}});var l=function(e,t,r,i,n){if(this.missing=[],this.missingMap={},this.formatValidators=e?Object.create(e.formatValidators):{},this.schemas=e?Object.create(e.schemas):{},this.collectMultiple=t,this.errors=[],this.handleError=t?this.collectError:this.returnError,i&&(this.checkRecursive=!0,this.scanned=[],this.scannedFrozen=[],this.scannedFrozenSchemas=[],this.scannedFrozenValidationErrors=[],this.validatedSchemasKey="tv4_validation_id",this.validationErrorsKey="tv4_validation_errors_id"),n&&(this.trackUnknownProperties=!0,this.knownPropertyPaths={},this.unknownPropertyPaths={}),this.errorMessages=r,this.definedKeywords={},e)for(var a in e.definedKeywords)this.definedKeywords[a]=e.definedKeywords[a].slice(0)};l.prototype.defineKeyword=function(e,t){this.definedKeywords[e]=this.definedKeywords[e]||[],this.definedKeywords[e].push(t)},l.prototype.createError=function(e,t,r,i,n){var o=this.errorMessages[e]||u[e];if("string"!=typeof o)return new a(e,"Unknown error code "+e+": "+JSON.stringify(t),r,i,n);var s=o.replace(/\{([^{}]*)\}/g,function(e,r){var i=t[r];return"string"==typeof i||"number"==typeof i?i:e});return new a(e,s,r,i,n)},l.prototype.returnError=function(e){return e},l.prototype.collectError=function(e){return e&&this.errors.push(e),null},l.prototype.prefixErrors=function(e,t,r){for(var i=e;i<this.errors.length;i++)this.errors[i]=this.errors[i].prefixWith(t,r);return this},l.prototype.banUnknownProperties=function(){for(var e in this.unknownPropertyPaths){var t=this.createError(d.UNKNOWN_PROPERTY,{path:e},e,""),r=this.handleError(t);if(r)return r}return null},l.prototype.addFormat=function(e,t){if("object"==typeof e){for(var r in e)this.addFormat(r,e[r]);return this}this.formatValidators[e]=t},l.prototype.resolveRefs=function(e,t){if(void 0!==e.$ref){if(t=t||{},t[e.$ref])return this.createError(d.CIRCULAR_REFERENCE,{urls:Object.keys(t).join(", ")},"","");t[e.$ref]=!0,e=this.getSchema(e.$ref,t)}return e},l.prototype.getSchema=function(e,t){var r;if(void 0!==this.schemas[e])return r=this.schemas[e],this.resolveRefs(r,t);var i=e,n="";if(e.indexOf("#")!==-1&&(n=e.substring(e.indexOf("#")+1),i=e.substring(0,e.indexOf("#"))),"object"==typeof this.schemas[i]){r=this.schemas[i];var a=decodeURIComponent(n);if(""===a)return this.resolveRefs(r,t);if("/"!==a.charAt(0))return;for(var o=a.split("/").slice(1),s=0;s<o.length;s++){var l=o[s].replace(/~1/g,"/").replace(/~0/g,"~");if(void 0===r[l]){r=void 0;break}r=r[l]}if(void 0!==r)return this.resolveRefs(r,t)}void 0===this.missing[i]&&(this.missing.push(i),this.missing[i]=i,this.missingMap[i]=i)},l.prototype.searchSchemas=function(e,t){if(e&&"object"==typeof e){"string"==typeof e.id&&o(t,e.id)&&void 0===this.schemas[e.id]&&(this.schemas[e.id]=e);for(var r in e)if("enum"!==r)if("object"==typeof e[r])this.searchSchemas(e[r],t);else if("$ref"===r){var n=i(e[r]);n&&void 0===this.schemas[n]&&void 0===this.missingMap[n]&&(this.missingMap[n]=n)}}},l.prototype.addSchema=function(e,t){if("string"!=typeof e||"undefined"==typeof t){if("object"!=typeof e||"string"!=typeof e.id)return;t=e,e=t.id}(e=i(e)+"#")&&(e=i(e)),this.schemas[e]=t,delete this.missingMap[e],n(t,e),this.searchSchemas(t,e)},l.prototype.getSchemaMap=function(){var e={};for(var t in this.schemas)e[t]=this.schemas[t];return e},l.prototype.getSchemaUris=function(e){var t=[];for(var r in this.schemas)e&&!e.test(r)||t.push(r);return t},l.prototype.getMissingUris=function(e){var t=[];for(var r in this.missingMap)e&&!e.test(r)||t.push(r);return t},l.prototype.dropSchemas=function(){this.schemas={},this.reset()},l.prototype.reset=function(){this.missing=[],this.missingMap={},this.errors=[]},l.prototype.validateAll=function(e,t,r,i,n){var o;if(t=this.resolveRefs(t),!t)return null;if(t instanceof a)return this.errors.push(t),t;var s,l=this.errors.length,d=null,f=null;if(this.checkRecursive&&e&&"object"==typeof e){if(o=!this.scanned.length,e[this.validatedSchemasKey]){var m=e[this.validatedSchemasKey].indexOf(t);if(m!==-1)return this.errors=this.errors.concat(e[this.validationErrorsKey][m]),null}if(Object.isFrozen(e)&&(s=this.scannedFrozen.indexOf(e),s!==-1)){var u=this.scannedFrozenSchemas[s].indexOf(t);if(u!==-1)return this.errors=this.errors.concat(this.scannedFrozenValidationErrors[s][u]),null}if(this.scanned.push(e),Object.isFrozen(e))s===-1&&(s=this.scannedFrozen.length,this.scannedFrozen.push(e),this.scannedFrozenSchemas.push([])),d=this.scannedFrozenSchemas[s].length,this.scannedFrozenSchemas[s][d]=t,this.scannedFrozenValidationErrors[s][d]=[];else{if(!e[this.validatedSchemasKey])try{Object.defineProperty(e,this.validatedSchemasKey,{value:[],configurable:!0}),Object.defineProperty(e,this.validationErrorsKey,{value:[],configurable:!0})}catch(c){e[this.validatedSchemasKey]=[],e[this.validationErrorsKey]=[]}f=e[this.validatedSchemasKey].length,e[this.validatedSchemasKey][f]=t,e[this.validationErrorsKey][f]=[]}}var h=this.errors.length,p=this.validateBasic(e,t,n)||this.validateNumeric(e,t,n)||this.validateString(e,t,n)||this.validateArray(e,t,n)||this.validateObject(e,t,n)||this.validateCombinations(e,t,n)||this.validateFormat(e,t,n)||this.validateDefinedKeywords(e,t,n)||null;if(o){for(;this.scanned.length;){var v=this.scanned.pop();delete v[this.validatedSchemasKey]}this.scannedFrozen=[],this.scannedFrozenSchemas=[]}if(p||h!==this.errors.length)for(;r&&r.length||i&&i.length;){var g=r&&r.length?""+r.pop():null,y=i&&i.length?""+i.pop():null;p&&(p=p.prefixWith(g,y)),this.prefixErrors(h,g,y)}return null!==d?this.scannedFrozenValidationErrors[s][d]=this.errors.slice(l):null!==f&&(e[this.validationErrorsKey][f]=this.errors.slice(l)),this.handleError(p)},l.prototype.validateFormat=function(e,t){if("string"!=typeof t.format||!this.formatValidators[t.format])return null;var r=this.formatValidators[t.format].call(null,e,t);return"string"==typeof r||"number"==typeof r?this.createError(d.FORMAT_CUSTOM,{message:r}).prefixWith(null,"format"):r&&"object"==typeof r?this.createError(d.FORMAT_CUSTOM,{message:r.message||"?"},r.dataPath||null,r.schemaPath||"/format"):null},l.prototype.validateDefinedKeywords=function(e,t){for(var r in this.definedKeywords)for(var i=this.definedKeywords[r],n=0;n<i.length;n++){var a=i[n],o=a(e,t[r],t);if("string"==typeof o||"number"==typeof o)return this.createError(d.KEYWORD_CUSTOM,{key:r,message:o}).prefixWith(null,"format");if(o&&"object"==typeof o){var s=o.code||d.KEYWORD_CUSTOM;if("string"==typeof s){if(!d[s])throw new Error("Undefined error code (use defineError): "+s);s=d[s]}var l="object"==typeof o.message?o.message:{key:r,message:o.message||"?"},f=o.schemaPath||"/"+r.replace(/~/g,"~0").replace(/\//g,"~1");return this.createError(s,l,o.dataPath||null,f)}}return null},l.prototype.validateBasic=function(e,t,r){var i;return(i=this.validateType(e,t,r))?i.prefixWith(null,"type"):(i=this.validateEnum(e,t,r))?i.prefixWith(null,"type"):null},l.prototype.validateType=function(e,t){if(void 0===t.type)return null;var r=typeof e;null===e?r="null":Array.isArray(e)&&(r="array");var i=t.type;"object"!=typeof i&&(i=[i]);for(var n=0;n<i.length;n++){var a=i[n];if(a===r||"integer"===a&&"number"===r&&e%1===0)return null}return this.createError(d.INVALID_TYPE,{type:r,expected:i.join("/")})},l.prototype.validateEnum=function(t,r){if(void 0===r["enum"])return null;for(var i=0;i<r["enum"].length;i++){var n=r["enum"][i];if(e(t,n))return null}return this.createError(d.ENUM_MISMATCH,{value:"undefined"!=typeof JSON?JSON.stringify(t):t})},l.prototype.validateNumeric=function(e,t,r){return this.validateMultipleOf(e,t,r)||this.validateMinMax(e,t,r)||null},l.prototype.validateMultipleOf=function(e,t){var r=t.multipleOf||t.divisibleBy;return void 0===r?null:"number"==typeof e&&e%r!==0?this.createError(d.NUMBER_MULTIPLE_OF,{value:e,multipleOf:r}):null},l.prototype.validateMinMax=function(e,t){if("number"!=typeof e)return null;if(void 0!==t.minimum){if(e<t.minimum)return this.createError(d.NUMBER_MINIMUM,{value:e,minimum:t.minimum}).prefixWith(null,"minimum");if(t.exclusiveMinimum&&e===t.minimum)return this.createError(d.NUMBER_MINIMUM_EXCLUSIVE,{value:e,minimum:t.minimum}).prefixWith(null,"exclusiveMinimum")}if(void 0!==t.maximum){if(e>t.maximum)return this.createError(d.NUMBER_MAXIMUM,{value:e,maximum:t.maximum}).prefixWith(null,"maximum");if(t.exclusiveMaximum&&e===t.maximum)return this.createError(d.NUMBER_MAXIMUM_EXCLUSIVE,{value:e,maximum:t.maximum}).prefixWith(null,"exclusiveMaximum")}return null},l.prototype.validateString=function(e,t,r){return this.validateStringLength(e,t,r)||this.validateStringPattern(e,t,r)||null},l.prototype.validateStringLength=function(e,t){return"string"!=typeof e?null:void 0!==t.minLength&&e.length<t.minLength?this.createError(d.STRING_LENGTH_SHORT,{length:e.length,minimum:t.minLength}).prefixWith(null,"minLength"):void 0!==t.maxLength&&e.length>t.maxLength?this.createError(d.STRING_LENGTH_LONG,{length:e.length,maximum:t.maxLength}).prefixWith(null,"maxLength"):null},l.prototype.validateStringPattern=function(e,t){if("string"!=typeof e||void 0===t.pattern)return null;var r=new RegExp(t.pattern);return r.test(e)?null:this.createError(d.STRING_PATTERN,{pattern:t.pattern}).prefixWith(null,"pattern")},l.prototype.validateArray=function(e,t,r){return Array.isArray(e)?this.validateArrayLength(e,t,r)||this.validateArrayUniqueItems(e,t,r)||this.validateArrayItems(e,t,r)||null:null},l.prototype.validateArrayLength=function(e,t){var r;return void 0!==t.minItems&&e.length<t.minItems&&(r=this.createError(d.ARRAY_LENGTH_SHORT,{length:e.length,minimum:t.minItems}).prefixWith(null,"minItems"),this.handleError(r))?r:void 0!==t.maxItems&&e.length>t.maxItems&&(r=this.createError(d.ARRAY_LENGTH_LONG,{length:e.length,maximum:t.maxItems}).prefixWith(null,"maxItems"),this.handleError(r))?r:null},l.prototype.validateArrayUniqueItems=function(t,r){if(r.uniqueItems)for(var i=0;i<t.length;i++)for(var n=i+1;n<t.length;n++)if(e(t[i],t[n])){var a=this.createError(d.ARRAY_UNIQUE,{match1:i,match2:n}).prefixWith(null,"uniqueItems");if(this.handleError(a))return a}return null},l.prototype.validateArrayItems=function(e,t,r){if(void 0===t.items)return null;var i,n;if(Array.isArray(t.items)){for(n=0;n<e.length;n++)if(n<t.items.length){if(i=this.validateAll(e[n],t.items[n],[n],["items",n],r+"/"+n))return i}else if(void 0!==t.additionalItems)if("boolean"==typeof t.additionalItems){if(!t.additionalItems&&(i=this.createError(d.ARRAY_ADDITIONAL_ITEMS,{}).prefixWith(""+n,"additionalItems"),this.handleError(i)))return i}else if(i=this.validateAll(e[n],t.additionalItems,[n],["additionalItems"],r+"/"+n))return i}else for(n=0;n<e.length;n++)if(i=this.validateAll(e[n],t.items,[n],["items"],r+"/"+n))return i;return null},l.prototype.validateObject=function(e,t,r){return"object"!=typeof e||null===e||Array.isArray(e)?null:this.validateObjectMinMaxProperties(e,t,r)||this.validateObjectRequiredProperties(e,t,r)||this.validateObjectProperties(e,t,r)||this.validateObjectDependencies(e,t,r)||null},l.prototype.validateObjectMinMaxProperties=function(e,t){var r,i=Object.keys(e);return void 0!==t.minProperties&&i.length<t.minProperties&&(r=this.createError(d.OBJECT_PROPERTIES_MINIMUM,{propertyCount:i.length,minimum:t.minProperties}).prefixWith(null,"minProperties"),this.handleError(r))?r:void 0!==t.maxProperties&&i.length>t.maxProperties&&(r=this.createError(d.OBJECT_PROPERTIES_MAXIMUM,{propertyCount:i.length,maximum:t.maxProperties}).prefixWith(null,"maxProperties"),this.handleError(r))?r:null},l.prototype.validateObjectRequiredProperties=function(e,t){if(void 0!==t.required)for(var r=0;r<t.required.length;r++){var i=t.required[r];if(void 0===e[i]){var n=this.createError(d.OBJECT_REQUIRED,{key:i}).prefixWith(null,""+r).prefixWith(null,"required");if(this.handleError(n))return n}}return null},l.prototype.validateObjectProperties=function(e,t,r){var i;for(var n in e){var a=r+"/"+n.replace(/~/g,"~0").replace(/\//g,"~1"),o=!1;if(void 0!==t.properties&&void 0!==t.properties[n]&&(o=!0,i=this.validateAll(e[n],t.properties[n],[n],["properties",n],a)))return i;if(void 0!==t.patternProperties)for(var s in t.patternProperties){var l=new RegExp(s);if(l.test(n)&&(o=!0,i=this.validateAll(e[n],t.patternProperties[s],[n],["patternProperties",s],a)))return i}if(o)this.trackUnknownProperties&&(this.knownPropertyPaths[a]=!0,delete this.unknownPropertyPaths[a]);else if(void 0!==t.additionalProperties){if(this.trackUnknownProperties&&(this.knownPropertyPaths[a]=!0,delete this.unknownPropertyPaths[a]),"boolean"==typeof t.additionalProperties){if(!t.additionalProperties&&(i=this.createError(d.OBJECT_ADDITIONAL_PROPERTIES,{}).prefixWith(n,"additionalProperties"),this.handleError(i)))return i}else if(i=this.validateAll(e[n],t.additionalProperties,[n],["additionalProperties"],a))return i}else this.trackUnknownProperties&&!this.knownPropertyPaths[a]&&(this.unknownPropertyPaths[a]=!0)}return null},l.prototype.validateObjectDependencies=function(e,t,r){var i;if(void 0!==t.dependencies)for(var n in t.dependencies)if(void 0!==e[n]){var a=t.dependencies[n];if("string"==typeof a){if(void 0===e[a]&&(i=this.createError(d.OBJECT_DEPENDENCY_KEY,{key:n,missing:a}).prefixWith(null,n).prefixWith(null,"dependencies"),this.handleError(i)))return i}else if(Array.isArray(a))for(var o=0;o<a.length;o++){var s=a[o];if(void 0===e[s]&&(i=this.createError(d.OBJECT_DEPENDENCY_KEY,{key:n,missing:s}).prefixWith(null,""+o).prefixWith(null,n).prefixWith(null,"dependencies"),this.handleError(i)))return i}else if(i=this.validateAll(e,a,[],["dependencies",n],r))return i}return null},l.prototype.validateCombinations=function(e,t,r){return this.validateAllOf(e,t,r)||this.validateAnyOf(e,t,r)||this.validateOneOf(e,t,r)||this.validateNot(e,t,r)||null},l.prototype.validateAllOf=function(e,t,r){if(void 0===t.allOf)return null;for(var i,n=0;n<t.allOf.length;n++){var a=t.allOf[n];if(i=this.validateAll(e,a,[],["allOf",n],r))return i}return null},l.prototype.validateAnyOf=function(e,t,r){if(void 0===t.anyOf)return null;var i,n,a=[],o=this.errors.length;this.trackUnknownProperties&&(i=this.unknownPropertyPaths,n=this.knownPropertyPaths);for(var s=!0,l=0;l<t.anyOf.length;l++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var f=t.anyOf[l],m=this.errors.length,u=this.validateAll(e,f,[],["anyOf",l],r);if(null===u&&m===this.errors.length){if(this.errors=this.errors.slice(0,o),this.trackUnknownProperties){for(var c in this.knownPropertyPaths)n[c]=!0,delete i[c];for(var h in this.unknownPropertyPaths)n[h]||(i[h]=!0);s=!1;continue}return null}u&&a.push(u.prefixWith(null,""+l).prefixWith(null,"anyOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=i,this.knownPropertyPaths=n),s?(a=a.concat(this.errors.slice(o)),this.errors=this.errors.slice(0,o),this.createError(d.ANY_OF_MISSING,{},"","/anyOf",a)):void 0},l.prototype.validateOneOf=function(e,t,r){if(void 0===t.oneOf)return null;var i,n,a=null,o=[],s=this.errors.length;this.trackUnknownProperties&&(i=this.unknownPropertyPaths,n=this.knownPropertyPaths);for(var l=0;l<t.oneOf.length;l++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var f=t.oneOf[l],m=this.errors.length,u=this.validateAll(e,f,[],["oneOf",l],r);if(null===u&&m===this.errors.length){if(null!==a)return this.errors=this.errors.slice(0,s),this.createError(d.ONE_OF_MULTIPLE,{index1:a,index2:l},"","/oneOf");if(a=l,this.trackUnknownProperties){for(var c in this.knownPropertyPaths)n[c]=!0,delete i[c];for(var h in this.unknownPropertyPaths)n[h]||(i[h]=!0)}}else u&&o.push(u.prefixWith(null,""+l).prefixWith(null,"oneOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=i,this.knownPropertyPaths=n),null===a?(o=o.concat(this.errors.slice(s)),this.errors=this.errors.slice(0,s),this.createError(d.ONE_OF_MISSING,{},"","/oneOf",o)):(this.errors=this.errors.slice(0,s),null)},l.prototype.validateNot=function(e,t,r){if(void 0===t.not)return null;var i,n,a=this.errors.length;this.trackUnknownProperties&&(i=this.unknownPropertyPaths,n=this.knownPropertyPaths,this.unknownPropertyPaths={},this.knownPropertyPaths={});var o=this.validateAll(e,t.not,null,null,r),s=this.errors.slice(a);return this.errors=this.errors.slice(0,a),this.trackUnknownProperties&&(this.unknownPropertyPaths=i,this.knownPropertyPaths=n),null===o&&0===s.length?this.createError(d.NOT_PASSED,{},"","/not"):null};var d={INVALID_TYPE:0,ENUM_MISMATCH:1,ANY_OF_MISSING:10,ONE_OF_MISSING:11,ONE_OF_MULTIPLE:12,NOT_PASSED:13,NUMBER_MULTIPLE_OF:100,NUMBER_MINIMUM:101,NUMBER_MINIMUM_EXCLUSIVE:102,NUMBER_MAXIMUM:103,NUMBER_MAXIMUM_EXCLUSIVE:104,STRING_LENGTH_SHORT:200,STRING_LENGTH_LONG:201,STRING_PATTERN:202,OBJECT_PROPERTIES_MINIMUM:300,OBJECT_PROPERTIES_MAXIMUM:301,OBJECT_REQUIRED:302,OBJECT_ADDITIONAL_PROPERTIES:303,OBJECT_DEPENDENCY_KEY:304,ARRAY_LENGTH_SHORT:400,ARRAY_LENGTH_LONG:401,ARRAY_UNIQUE:402,ARRAY_ADDITIONAL_ITEMS:403,FORMAT_CUSTOM:500,KEYWORD_CUSTOM:501,CIRCULAR_REFERENCE:600,UNKNOWN_PROPERTY:1e3},f={};for(var m in d)f[d[m]]=m;var u={INVALID_TYPE:"invalid type: {type} (expected {expected})",ENUM_MISMATCH:"No enum match for: {value}",ANY_OF_MISSING:'Data does not match any schemas from "anyOf"',ONE_OF_MISSING:'Data does not match any schemas from "oneOf"',ONE_OF_MULTIPLE:'Data is valid against more than one schema from "oneOf": indices {index1} and {index2}',NOT_PASSED:'Data matches schema from "not"',NUMBER_MULTIPLE_OF:"Value {value} is not a multiple of {multipleOf}",NUMBER_MINIMUM:"Value {value} is less than minimum {minimum}",NUMBER_MINIMUM_EXCLUSIVE:"Value {value} is equal to exclusive minimum {minimum}",NUMBER_MAXIMUM:"Value {value} is greater than maximum {maximum}",NUMBER_MAXIMUM_EXCLUSIVE:"Value {value} is equal to exclusive maximum {maximum}",STRING_LENGTH_SHORT:"String is too short ({length} chars), minimum {minimum}",STRING_LENGTH_LONG:"String is too long ({length} chars), maximum {maximum}",STRING_PATTERN:"String does not match pattern: {pattern}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({propertyCount}), minimum {minimum}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({propertyCount}), maximum {maximum}",OBJECT_REQUIRED:"Missing required property: {key}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {missing} (due to key: {key})",ARRAY_LENGTH_SHORT:"Array is too short ({length}), minimum {minimum}",ARRAY_LENGTH_LONG:"Array is too long ({length}), maximum {maximum}",ARRAY_UNIQUE:"Array items are not unique (indices {match1} and {match2})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",FORMAT_CUSTOM:"Format validation failed ({message})",KEYWORD_CUSTOM:"Keyword failed: {key} ({message})",CIRCULAR_REFERENCE:"Circular $refs: {urls}",UNKNOWN_PROPERTY:"Unknown property (not in schema)"};a.prototype=Object.create(Error.prototype),a.prototype.constructor=a,a.prototype.name="ValidationError",a.prototype.prefixWith=function(e,t){if(null!==e&&(e=e.replace(/~/g,"~0").replace(/\//g,"~1"),this.dataPath="/"+e+this.dataPath),null!==t&&(t=t.replace(/~/g,"~0").replace(/\//g,"~1"),this.schemaPath="/"+t+this.schemaPath),null!==this.subErrors)for(var r=0;r<this.subErrors.length;r++)this.subErrors[r].prefixWith(e,t);return this};var c={},h=s();return h.addLanguage("en-gb",u),h.tv4=h,h}),function(e,t){"function"==typeof define&&define.amd?define("SeedModules.AngularUI/js/seed/schema-form",["angular","objectpath","tv4"],t):"object"==typeof exports?module.exports=t(require("angular"),require("objectpath"),require("tv4")):e.schemaForm=t(e.angular,e.objectpath,e.tv4)}(this,function(e,t,r){var i=[];try{e.module("ngSanitize"),i.push("ngSanitize")}catch(n){}try{e.module("ui.sortable"),i.push("ui.sortable")}catch(n){}try{e.module("angularSpectrumColorpicker"),i.push("angularSpectrumColorpicker")}catch(n){}var a=e.module("schemaForm",i);return e.module("schemaForm").provider("sfPath",[function(){var r=window.ObjectPath||t,i={parse:r.parse};1===e.version.major&&e.version.minor<3?i.stringify=function(e){return Array.isArray(e)?e.join("."):e.toString()}:i.stringify=r.stringify,i.normalize=function(e,t){return i.stringify(Array.isArray(e)?e:i.parse(e),t)},this.parse=i.parse,this.stringify=i.stringify,this.normalize=i.normalize,this.$get=function(){return i}}]),e.module("schemaForm").provider("sfBuilder",["sfPathProvider",function(t){var r=/[A-Z]/g,i=function(e,t){return t=t||"_",e.replace(r,function(e,r){return(r?t:"")+e.toLowerCase()})},n=0,a={sfField:function(e){e.fieldFrag.firstChild.setAttribute("sf-field",n),e.lookup["f"+n]=e.form,n++},ngModel:function(e){if(e.form.key){var r=e.form.key;e.state.keyRedaction&&(r=r.slice(e.state.keyRedaction));var i;if(e.state.modelValue)i=e.state.modelValue;else{var n=t.stringify(r).replace(/"/g,"&quot;");i=e.state.modelName||"model",n&&(i+=("["!==n[0]?".":"")+n)}for(var a=e.fieldFrag.querySelectorAll("[sf-field-model]"),o=0;o<a.length;o++){var s=a[o],l=s.getAttribute("sf-field-model");if(l&&""!==l)if("replaceAll"===l)for(var d=s.attributes,f=0;f<d.length;f++)d[f].value&&d[f].value.indexOf("$$value")!==-1&&(d[f].value=d[f].value.replace(/\$\$value\$\$/g,i));else{var m=s.getAttribute(l);m&&m.indexOf("$$value$$")?s.setAttribute(l,m.replace(/\$\$value\$\$/g,i)):s.setAttribute(l,i)}else s.setAttribute("ng-model",i)}}},simpleTransclusion:function(e){var t=e.build(e.form.items,e.path+".items",e.state);e.fieldFrag.firstChild.appendChild(t)},ngModelOptions:function(e){e.form.ngModelOptions&&Object.keys(e.form.ngModelOptions).length>0&&e.fieldFrag.firstChild.setAttribute("ng-model-options",JSON.stringify(e.form.ngModelOptions))},transclusion:function(e){var t=e.fieldFrag.querySelectorAll("[sf-field-transclude]");if(t.length)for(var r=0;r<t.length;r++){var i=t[r],n=i.getAttribute("sf-field-transclude")||"items",a=e.form[n];if(a){var o=e.build(a,e.path+"."+n,e.state);i.appendChild(o)}}},condition:function(e){if(e.form.condition){var r="evalExpr("+e.path+'.condition, { model: model, "arrayIndex": $index})';if(e.form.key){var i=t.stringify(e.form.key);r="evalExpr("+e.path+'.condition,{ model: model, "arrayIndex": $index, "modelValue": model'+("["===i[0]?"":".")+i+"})"}for(var n=e.fieldFrag.children||e.fieldFrag.childNodes,a=0;a<n.length;a++){var o=n[a],s=o.getAttribute("ng-if");o.setAttribute("ng-if",s?"("+s+") || ("+r+")":r)}}},array:function(r){var i=r.fieldFrag.querySelector("[schema-form-array-items]");if(i){if(state=e.copy(r.state),state.keyRedaction=state.keyRedaction||0,state.keyRedaction+=r.form.key.length+1,r.form.schema&&r.form.schema.items&&r.form.schema.items.type&&r.form.schema.items.type.indexOf("object")===-1&&r.form.schema.items.type.indexOf("array")===-1){t.stringify(r.form.key).replace(/"/g,"&quot;")+"[$index]";state.modelValue="modelArray[$index]"}else state.modelName="item";state.arrayCompatFlag=!0;var n=r.build(r.form.items,r.path+".items",state);i.appendChild(n)}}};this.builders=a;var o=[a.sfField,a.ngModel,a.ngModelOptions,a.condition];this.stdBuilders=o,this.$get=["$templateCache","schemaFormDecorators","sfPath",function(e,t,r){var n=function(e,t){if(e.key){var i=t[r.stringify(e.key)];if(i){for(;i.firstChild;)i.removeChild(i.firstChild);return i}}},s=function(e,t,r,a,o,l,d){l=l||{},d=d||Object.create(null),o=o||"schemaForm.form";var f=document.createDocumentFragment();return e.reduce(function(e,f,m){if(!f.type)return e;var u=t[f.type]||t["default"];if(u.replace){var c;l.arrayCompatFlag=!1;var h=document.createElement("div"),p=r(f,u)||r(f,t["default"]);for(h.innerHTML=p,c=document.createDocumentFragment();h.childNodes.length>0;)c.appendChild(h.childNodes[0]);var v={fieldFrag:c,form:f,lookup:d,state:l,path:o+"["+m+"]",build:function(e,i,n){return s(e,t,r,a,i,n,d)}},g=f.builder||u.builder;"function"==typeof g?g(v):g.forEach(function(e){e(v)}),(n(f,a)||e).appendChild(c)}else{var y=document.createElement(i(t.__name,"-"));l.arrayCompatFlag?y.setAttribute("form","copyWithIndex($index)"):y.setAttribute("form",o+"["+m+"]"),(n(f,a)||e).appendChild(y)}return e},f),f};return{build:function(t,r,i,n){return s(t,r,function(t,r){return"template"===t.type?t.template:e.get(r.template)},i,void 0,void 0,n)},builder:a,stdBuilders:o,internalBuild:s}}]}]),e.module("schemaForm").provider("schemaFormDecorators",["$compileProvider","sfPathProvider",function(t,r){var i="",n={},a=function(e,t){"sfDecorator"===e&&(e=i);var r=n[e];return r[t.type]?r[t.type].template:r["default"].template},o=function(i){t.directive(i,["$parse","$compile","$http","$templateCache","$interpolate","$q","sfErrorMessage","sfPath","sfSelect",function(t,n,o,s,l,d,f,m,u){return{restrict:"AE",replace:!1,transclude:!1,scope:!0,require:"?^sfSchema",link:function(t,c,h,p){t.$on("schemaFormPropagateNgModelController",function(e,r){e.stopPropagation(),e.preventDefault(),t.ngModel=r}),t.showTitle=function(){return t.form&&t.form.notitle!==!0&&t.form.title},t.listToCheckboxValues=function(t){
var r={};return e.forEach(t,function(e){r[e]=!0}),r},t.checkboxValuesToList=function(t){var r=[];return e.forEach(t,function(e,t){e&&r.push(t)}),r},t.buttonClick=function(r,i){e.isFunction(i.onClick)?i.onClick(r,i):e.isString(i.onClick)&&(p?p.evalInParentScope(i.onClick,{$event:r,form:i}):t.$eval(i.onClick,{$event:r,form:i}))},t.evalExpr=function(e,r){return p?p.evalInParentScope(e,r):t.$eval(e,r)},t.evalInScope=function(e,r){if(e)return t.$eval(e,r)},t.interp=function(e,t){return e&&l(e)(t)},t.hasSuccess=function(){return!!t.ngModel&&(t.ngModel.$valid&&(!t.ngModel.$pristine||!t.ngModel.$isEmpty(t.ngModel.$modelValue)))},t.hasError=function(){return!!t.ngModel&&(t.ngModel.$invalid&&!t.ngModel.$pristine)},t.errorMessage=function(e){return f.interpolate(e&&e.code+""||"default",t.ngModel&&t.ngModel.$modelValue||"",t.ngModel&&t.ngModel.$viewValue||"",t.form,t.options&&t.options.validationMessage)};var v=t.$watch(h.form,function(l){if(l){l.ngModelOptions=l.ngModelOptions||{},t.form=l;var f;if("template"===l.type&&l.template)f=d.when(l.template);else{var h="template"===l.type?l.templateUrl:a(i,l);f=o.get(h,{cache:s}).then(function(e){return e.data})}f.then(function(i){if(l.key){var a=l.key?r.stringify(l.key).replace(/"/g,"&quot;"):"";i=i.replace(/\$\$value\$\$/g,"model"+("["!==a[0]?".":"")+a)}if(c.html(i),l.condition){var o='evalExpr(form.condition,{ model: model, "arrayIndex": arrayIndex})';l.key&&(o='evalExpr(form.condition,{ model: model, "arrayIndex": arrayIndex, "modelValue": model'+m.stringify(l.key)+"})"),e.forEach(c.children(),function(e){var t=e.getAttribute("ng-if");e.setAttribute("ng-if",t?"("+t+") || ("+o+")":o)})}n(c.contents())(t)}),l.key&&(t.$on("schemaForm.error."+l.key.join("."),function(e,r,i,n){i!==!0&&i!==!1||(n=i,i=void 0),t.ngModel&&r&&(t.ngModel.$setDirty?t.ngModel.$setDirty():(t.ngModel.$dirty=!0,t.ngModel.$pristine=!1),i&&(l.validationMessage||(l.validationMessage={}),l.validationMessage[r]=i),t.ngModel.$setValidity(r,n===!0),n===!0&&(t.ngModel.$validate(),t.$broadcast("schemaFormValidate")))}),t.$on("$destroy",function(){if(!t.externalDestructionInProgress){var e=l.destroyStrategy||t.options&&t.options.destroyStrategy||"remove";if(l.key&&"retain"!==e){var r=t.model;if(l.key.length>1&&(r=u(l.key.slice(0,l.key.length-1),r)),void 0===r)return;var i=l.schema&&l.schema.type||"";"empty"===e&&i.indexOf("string")!==-1?r[l.key.slice(-1)]="":"empty"===e&&i.indexOf("object")!==-1?r[l.key.slice(-1)]={}:"empty"===e&&i.indexOf("array")!==-1?r[l.key.slice(-1)]=[]:"null"===e?r[l.key.slice(-1)]=null:delete r[l.key.slice(-1)]}}})),v()}})}}}])},s=function(r,i,n){n=!!e.isDefined(n)&&n,t.directive("sf"+e.uppercase(r[0])+r.substr(1),function(){return{restrict:"EAC",scope:!0,replace:!0,transclude:n,template:'<sf-decorator form="form"></sf-decorator>',link:function(t,i,n){var a={items:"c",titleMap:"c",schema:"c"},o={type:r},s=!0;e.forEach(n,function(r,i){if("$"!==i[0]&&0!==i.indexOf("ng")&&"sfField"!==i){var l=function(r){e.isDefined(r)&&r!==o[i]&&(o[i]=r,s&&o.type&&(o.key||e.isUndefined(n.key))&&(t.form=o,s=!1))};"model"===i?t.$watch(r,function(e){e&&t.model!==e&&(t.model=e)}):"c"===a[i]?t.$watchCollection(r,l):n.$observe(i,l)}})}}})};this.createDecorator=function(t,r){n[t]={__name:t},e.forEach(r,function(e,r){n[t][r]={template:e,replace:!1,builder:[]}}),n[i]||(i=t),o(t)},this.defineDecorator=function(t,r){n[t]={__name:t},e.forEach(r,function(r,i){r.builder=r.builder||[],r.replace=!e.isDefined(r.replace)||r.replace,n[t][i]=r}),n[i]||(i=t),o(t)},this.createDirective=s,this.createDirectives=function(t){e.forEach(t,function(e,t){s(t,e)})},this.decorator=function(e){return e=e||i,n[e]},this.addMapping=function(e,t,r,i,a){n[e]&&(n[e][t]={template:r,builder:i,replace:!!a})},this.defineAddOn=function(e,t,r,i){n[e]&&(n[e][t]={template:r,builder:i,replace:!0})},this.$get=function(){return{decorator:function(e){return n[e]||n[i]},defaultDecorator:i}},o("sfDecorator")}]),e.module("schemaForm").provider("sfErrorMessage",function(){var t={"default":"Field does not validate",0:"Invalid type, expected {{schema.type}}",1:"No enum match for: {{viewValue}}",10:'Data does not match any schemas from "anyOf"',11:'Data does not match any schemas from "oneOf"',12:'Data is valid against more than one schema from "oneOf"',13:'Data matches schema from "not"',100:"Value is not a multiple of {{schema.multipleOf}}",101:"{{viewValue}} is less than the allowed minimum of {{schema.minimum}}",102:"{{viewValue}} is equal to the exclusive minimum {{schema.minimum}}",103:"{{viewValue}} is greater than the allowed maximum of {{schema.maximum}}",104:"{{viewValue}} is equal to the exclusive maximum {{schema.maximum}}",105:"Value is not a valid number",200:"String is too short ({{viewValue.length}} chars), minimum {{schema.minLength}}",201:"String is too long ({{viewValue.length}} chars), maximum {{schema.maxLength}}",202:"String does not match pattern: {{schema.pattern}}",300:"Too few properties defined, minimum {{schema.minProperties}}",301:"Too many properties defined, maximum {{schema.maxProperties}}",302:"Required",303:"Additional properties not allowed",304:"Dependency failed - key must exist",400:"Array is too short ({{value.length}}), minimum {{schema.minItems}}",401:"Array is too long ({{value.length}}), maximum {{schema.maxItems}}",402:"Array items are not unique",403:"Additional items not allowed",500:"Format validation failed",501:'Keyword failed: "{{title}}"',600:"Circular $refs",1e3:"Unknown property (not in schema)"};t.number=t[105],t.required=t[302],t.min=t[101],t.max=t[103],t.maxlength=t[201],t.minlength=t[200],t.pattern=t[202],this.setDefaultMessages=function(e){t=e},this.getDefaultMessages=function(){return t},this.setDefaultMessage=function(e,r){t[e]=r},this.$get=["$interpolate",function(r){var i={};return i.defaultMessages=t,i.interpolate=function(i,n,a,o,s){s=s||{};var l=o.validationMessage||{};0===i.indexOf("tv4-")&&(i=i.substring(4));var d=l["default"]||s["default"]||"";[l,s,t].some(function(t){return e.isString(t)||e.isFunction(t)?(d=t,!0):t&&t[i]?(d=t[i],!0):void 0});var f={error:i,value:n,viewValue:a,form:o,schema:o.schema,title:o.title||o.schema&&o.schema.title};return e.isFunction(d)?d(f):r(d)(f)},i}]}),e.module("schemaForm").provider("schemaForm",["sfPathProvider",function(t){var r=function(e){if(Array.isArray(e)&&2==e.length){if("null"===e[0])return e[1];if("null"===e[1])return e[0]}return e},i=function(e){var t=[];return e.forEach(function(e){t.push({name:e,value:e})}),t},n=function(t,r){if(!e.isArray(t)){var i=[];return r?e.forEach(r,function(e,r){i.push({name:t[e],value:e})}):e.forEach(t,function(e,t){i.push({name:e,value:t})}),i}return t},a=function(t,i,n){var a=p[r(i.type)];if(a)for(var o,s=0;s<a.length;s++)if(o=a[s](t,i,n))return o.schema["x-schema-form"]&&e.isObject(o.schema["x-schema-form"])&&(o=e.extend(o,o.schema["x-schema-form"])),o},o=function(t,r,i){i=i||{};var a=i.global&&i.global.formDefaults?e.copy(i.global.formDefaults):{};return i.global&&i.global.supressPropertyTitles===!0?a.title=r.title:a.title=r.title||t,r.description&&(a.description=r.description),i.required!==!0&&r.required!==!0||(a.required=!0),r.maxLength&&(a.maxlength=r.maxLength),r.minLength&&(a.minlength=r.minLength),(r.readOnly||r.readonly)&&(a.readonly=!0),r.minimum&&(a.minimum=r.minimum+(r.exclusiveMinimum?1:0)),r.maximum&&(a.maximum=r.maximum-(r.exclusiveMaximum?1:0)),r.validationMessage&&(a.validationMessage=r.validationMessage),r.enumNames&&(a.titleMap=n(r.enumNames,r["enum"])),a.schema=r,a.ngModelOptions=a.ngModelOptions||{},a},s=function(e,i,n){if("string"===r(i.type)&&!i["enum"]){var a=o(e,i,n);return a.key=n.path,a.type="text",n.lookup[t.stringify(n.path)]=a,a}},l=function(e,i,n){if("number"===r(i.type)){var a=o(e,i,n);return a.key=n.path,a.type="number",n.lookup[t.stringify(n.path)]=a,a}},d=function(e,i,n){if("integer"===r(i.type)){var a=o(e,i,n);return a.key=n.path,a.type="number",n.lookup[t.stringify(n.path)]=a,a}},f=function(e,i,n){if("boolean"===r(i.type)){var a=o(e,i,n);return a.key=n.path,a.type="checkbox",n.lookup[t.stringify(n.path)]=a,a}},m=function(e,n,a){if("string"===r(n.type)&&n["enum"]){var s=o(e,n,a);return s.key=a.path,s.type="select",s.titleMap||(s.titleMap=i(n["enum"])),a.lookup[t.stringify(a.path)]=s,s}},u=function(e,n,a){if("array"===r(n.type)&&n.items&&n.items["enum"]){var s=o(e,n,a);return s.key=a.path,s.type="checkboxes",s.titleMap||(s.titleMap=i(n.items["enum"])),a.lookup[t.stringify(a.path)]=s,s}},c=function(i,n,s){if("object"===r(n.type)){var l=o(i,n,s);return l.type="fieldset",l.items=[],s.lookup[t.stringify(s.path)]=l,e.forEach(n.properties,function(e,r){var i=s.path.slice();if(i.push(r),s.ignore[t.stringify(i)]!==!0){var o=n.required&&n.required.indexOf(r)!==-1,d=a(r,e,{path:i,required:o||!1,lookup:s.lookup,ignore:s.ignore,global:s.global});d&&l.items.push(d)}}),l}},h=function(e,i,n){if("array"===r(i.type)){var s=o(e,i,n);s.type="array",s.key=n.path,n.lookup[t.stringify(n.path)]=s;var l=i.required&&i.required.indexOf(n.path[n.path.length-1])!==-1,d=n.path.slice();return d.push(""),s.items=[a(e,i.items,{path:d,required:l||!1,lookup:n.lookup,ignore:n.ignore,global:n.global})],s}},p={string:[m,s],object:[c],number:[l],integer:[d],"boolean":[f],array:[u,h]},v=function(e){return e};this.defaults=p,this.stdFormObj=o,this.defaultFormDefinition=a,this.postProcess=function(e){v=e},this.appendRule=function(e,t){p[e]||(p[e]=[]),p[e].push(t)},this.prependRule=function(e,t){p[e]||(p[e]=[]),p[e].unshift(t)},this.createStandardForm=o,this.$get=function(){var i={};return i.merge=function(r,a,o,s,l,d){a=a||["*"],s=s||{},l=l||r.readonly||r.readOnly;var f=i.defaults(r,o,s),m=a.indexOf("*");m!==-1&&(a=a.slice(0,m).concat(f.form).concat(a.slice(m+1)));var u=f.lookup;return v(a.map(function(a){if("string"==typeof a&&(a={key:a}),a.key&&"string"==typeof a.key&&(a.key=t.parse(a.key)),a.titleMap&&(a.titleMap=n(a.titleMap)),a.itemForm){a.items=[];var f=t.stringify(a.key),m=u[f];e.forEach(m.items,function(t){var r=e.copy(a.itemForm);r.key=t.key,a.items.push(r)})}if(a.key){var c=t.stringify(a.key);if(u[c]){var h=u[c];e.forEach(h,function(e,t){void 0===a[t]&&(a[t]=h[t])})}}return l===!0&&(a.readonly=!0),a.items&&(a.items=i.merge(r,a.items,o,s,a.readonly,d)),a.tabs&&e.forEach(a.tabs,function(e){e.items=i.merge(r,e.items,o,s,a.readonly,d)}),"checkbox"===a.type&&e.isUndefined(a.schema["default"])&&(a.schema["default"]=!1),d&&"template"===a.type&&!a.template&&a.templateUrl&&d.push(a),a}))},i.defaults=function(t,i,n){var o=[],s={};if(i=i||{},n=n||{},"object"!==r(t.type))throw new Error('Not implemented. Only type "object" allowed at root level of schema.');return e.forEach(t.properties,function(e,r){if(i[r]!==!0){var l=t.required&&t.required.indexOf(r)!==-1,d=a(r,e,{path:[r],lookup:s,ignore:i,required:l,global:n});d&&o.push(d)}}),{form:o,lookup:s}},i.traverseSchema=function(t,r,i,n){n=!e.isDefined(n)||n,i=i||[];var a=function(t,r,i){if(r(t,i),e.forEach(t.properties,function(e,t){var n=i.slice();n.push(t),a(e,r,n)}),!n&&t.items){var o=i.slice();o.push(""),a(t.items,r,o)}};a(t,r,i||[])},i.traverseForm=function(t,r){r(t),e.forEach(t.items,function(e){i.traverseForm(e,r)}),t.tabs&&e.forEach(t.tabs,function(t){e.forEach(t.items,function(e){i.traverseForm(e,r)})})},i}}]),e.module("schemaForm").factory("sfSelect",["sfPath",function(e){var t=/^\d+$/;return function(r,i,n){i||(i=this);var a="string"==typeof r?e.parse(r):r;if("undefined"!=typeof n&&1===a.length)return i[a[0]]=n,i;"undefined"!=typeof n&&"undefined"==typeof i[a[0]]&&(i[a[0]]=a.length>2&&t.test(a[1])?[]:{});for(var o=i[a[0]],s=1;s<a.length;s++){if(""===a[s])return;if("undefined"!=typeof n){if(s===a.length-1)return o[a[s]]=n,n;var l=o[a[s]];"undefined"!=typeof l&&null!==l||(l=t.test(a[s+1])?[]:{},o[a[s]]=l),o=l}else o&&(o=o[a[s]])}return o}}]),e.module("schemaForm").factory("sfValidator",[function(){var t={};return t.validate=function(t,i){if(!t)return{valid:!0};var n=t.schema;if(!n)return{valid:!0};""===i&&(i=void 0),"number"===t.type&&null===i&&(i=void 0);var a={type:"object",properties:{}},o=t.key[t.key.length-1];a.properties[o]=n,t.required&&(a.required=[o]);var s={};return e.isDefined(i)&&(s[o]=i),r.validateResult(s,a)},t}]),e.module("schemaForm").directive("sfArray",["sfSelect","schemaForm","sfValidator","sfPath",function(t,r,i,n){var a=function(e){return function(t){t.key&&(t.key[t.key.indexOf("")]=e)}};return{restrict:"A",scope:!0,require:"?ngModel",link:function(o,s,l,d){var f={};o.validateArray=e.noop,d&&o.$emit("schemaFormPropagateNgModelController",d);var m=o.$watch(l.sfArray,function(s){if(s){var l=t(s.key,o.model),u=n.normalize(s.key);if(o.$watch("model"+("["!==u[0]?".":"")+u,function(e){l=o.modelArray=e}),e.isUndefined(l)&&(l=[],t(s.key,o.model,l)),o.modelArray=l,s.items){var c=s.items[0];s.items.length>1&&(c={type:"section",items:s.items.map(function(t){return t.ngModelOptions=s.ngModelOptions,e.isUndefined(t.readonly)&&(t.readonly=s.readonly),t})})}if(o.copyWithIndex=function(t){if(!f[t]&&c){var i=e.copy(c);i.arrayIndex=t,r.traverseForm(i,a(t)),f[t]=i}return f[t]},o.appendToArray=function(){var i=l.length,n=o.copyWithIndex(i);if(r.traverseForm(n,function(r){if(r.key){var i;e.isDefined(r["default"])&&(i=r["default"]),e.isDefined(r.schema)&&e.isDefined(r.schema["default"])&&(i=r.schema["default"]),e.isDefined(i)&&t(r.key,o.model,i)}}),i===l.length){var a,d=t("schema.items.type",s);"object"===d?a={}:"array"===d&&(a=[]),l.push(a)}return o.validateArray(),l},o.deleteFromArray=function(e){return l.splice(e,1),o.validateArray(),d&&d.$setDirty&&d.$setDirty(),l},s.titleMap||s.startEmpty===!0||0!==l.length||o.appendToArray(),s.titleMap&&s.titleMap.length>0){o.titleMapValues=[];var h=function(e){o.titleMapValues=[],e=e||[],s.titleMap.forEach(function(t){o.titleMapValues.push(e.indexOf(t.value)!==-1)})};h(o.modelArray),o.$watchCollection("modelArray",h),o.$watchCollection("titleMapValues",function(e,t){if(e&&e!==t){for(var r=o.modelArray;r.length>0;)r.pop();s.titleMap.forEach(function(t,i){e[i]&&r.push(t.value)}),o.validateArray()}})}if(d){var p;o.validateArray=function(){var e=i.validate(s,o.modelArray.length>0?o.modelArray:void 0);Object.keys(d.$error).filter(function(e){return 0===e.indexOf("tv4-")}).forEach(function(e){d.$setValidity(e,!0)}),e.valid!==!1||!e.error||""!==e.error.dataPath&&e.error.dataPath!=="/"+s.key[s.key.length-1]||(d.$setViewValue(o.modelArray),p=e.error,d.$setValidity("tv4-"+e.error.code,!1))},o.$on("schemaFormValidate",o.validateArray),o.hasSuccess=function(){return o.options&&o.options.pristine&&o.options.pristine.success===!1?d.$valid&&!d.$pristine&&!d.$isEmpty(d.$modelValue):d.$valid&&(!d.$pristine||!d.$isEmpty(d.$modelValue))},o.hasError=function(){return o.options&&o.options.pristine&&o.options.pristine.errors===!1?d.$invalid&&!d.$pristine:d.$invalid},o.schemaError=function(){return p}}m()}})}}}]),e.module("schemaForm").directive("sfChanged",function(){return{require:"ngModel",restrict:"AC",scope:!1,link:function(t,r,i,n){var a=t.$eval(i.sfChanged);a&&a.onChange&&n.$viewChangeListeners.push(function(){e.isFunction(a.onChange)?a.onChange(n.$modelValue,a):t.evalExpr(a.onChange,{modelValue:n.$modelValue,form:a})})}}}),e.module("schemaForm").directive("sfField",["$parse","$compile","$http","$templateCache","$interpolate","$q","sfErrorMessage","sfPath","sfSelect",function(t,r,i,n,a,o,s,l,d){return{restrict:"AE",replace:!1,transclude:!1,scope:!0,require:"^sfSchema",link:{pre:function(e,t,r,i){e.$on("schemaFormPropagateNgModelController",function(t,r){t.stopPropagation(),t.preventDefault(),e.ngModel=r}),e.form=i.lookup["f"+r.sfField]},post:function(t,r,i,n){t.showTitle=function(){return t.form&&t.form.notitle!==!0&&t.form.title},t.listToCheckboxValues=function(t){var r={};return e.forEach(t,function(e){r[e]=!0}),r},t.checkboxValuesToList=function(t){var r=[];return e.forEach(t,function(e,t){e&&r.push(t)}),r},t.buttonClick=function(r,i){e.isFunction(i.onClick)?i.onClick(r,i):e.isString(i.onClick)&&(n?n.evalInParentScope(i.onClick,{$event:r,form:i}):t.$eval(i.onClick,{$event:r,form:i}))},t.evalExpr=function(e,r){return n?n.evalInParentScope(e,r):t.$eval(e,r)},t.evalInScope=function(e,r){if(e)return t.$eval(e,r)},t.interp=function(e,t){return e&&a(e)(t)},t.hasSuccess=function(){return!!t.ngModel&&(t.options&&t.options.pristine&&t.options.pristine.success===!1?t.ngModel.$valid&&!t.ngModel.$pristine&&!t.ngModel.$isEmpty(t.ngModel.$modelValue):t.ngModel.$valid&&(!t.ngModel.$pristine||!t.ngModel.$isEmpty(t.ngModel.$modelValue)))},t.hasError=function(){return!!t.ngModel&&(t.options&&t.options.pristine&&t.options.pristine.errors===!1?t.ngModel.$invalid&&!t.ngModel.$pristine:t.ngModel.$invalid)},t.errorMessage=function(e){return s.interpolate(e&&e.code+""||"default",t.ngModel&&t.ngModel.$modelValue||"",t.ngModel&&t.ngModel.$viewValue||"",t.form,t.options&&t.options.validationMessage)};var o=t.form;o.key&&(t.$on("schemaForm.error."+o.key.join("."),function(e,r,i,n){i!==!0&&i!==!1||(n=i,i=void 0),t.ngModel&&r&&(t.ngModel.$setDirty?t.ngModel.$setDirty():(t.ngModel.$dirty=!0,t.ngModel.$pristine=!1),i&&(o.validationMessage||(o.validationMessage={}),o.validationMessage[r]=i),t.ngModel.$setValidity(r,n===!0),n===!0&&(t.ngModel.$validate(),t.$broadcast("schemaFormValidate")))}),t.$on("$destroy",function(){if(!t.externalDestructionInProgress){var e=o.destroyStrategy||t.options&&t.options.destroyStrategy||"remove";if(o.key&&"retain"!==e){var r=t.model;if(o.key.length>1&&(r=d(o.key.slice(0,o.key.length-1),r)),void 0===r)return;var i=o.schema&&o.schema.type||"";"empty"===e&&i.indexOf("string")!==-1?r[o.key.slice(-1)]="":"empty"===e&&i.indexOf("object")!==-1?r[o.key.slice(-1)]={}:"empty"===e&&i.indexOf("array")!==-1?r[o.key.slice(-1)]=[]:"null"===e?r[o.key.slice(-1)]=null:delete r[o.key.slice(-1)]}}}))}}}}]),e.module("schemaForm").directive("sfMessage",["$injector","sfErrorMessage",function(t,r){var i=t.has("$sanitize")?t.get("$sanitize"):function(e){return e};return{scope:!1,restrict:"EA",link:function(t,n,a){var o="";a.sfMessage&&t.$watch(a.sfMessage,function(e){e&&(o=i(e),d(!!t.ngModel))});var s,l=function(e){e!==s&&(n.html(e),s=e)},d=function(i){if(i)if(t.hasError()){var n=[];e.forEach(t.ngModel&&t.ngModel.$error,function(e,t){e&&n.push(t)}),n=n.filter(function(e){return"schemaForm"!==e});var a=n[0];l(a?r.interpolate(a,t.ngModel.$modelValue,t.ngModel.$viewValue,t.form,t.options&&t.options.validationMessage):o)}else l(o);else l(o)};d();var f=t.$watch("ngModel",function(e){e&&(e.$parsers.push(function(e){return d(!0),e}),e.$formatters.push(function(e){return d(!0),e}),f())});t.$watchCollection("ngModel.$error",function(){d(!!t.ngModel)})}}}]),e.module("schemaForm").directive("sfNewArray",["sfSelect","sfPath","schemaForm",function(t,r,i){return{scope:!1,link:function(n,a,o){n.min=0,n.modelArray=n.$eval(o.sfNewArray);var s=function(){n.modelArray=n.$eval(o.sfNewArray),n.ngModel&&n.ngModel.$pristine&&n.firstDigest&&(!n.options||n.options.validateOnRender!==!0)||n.validateField&&n.validateField()},l=function(){n.form&&n.form.onChange&&(e.isFunction(n.form.onChange)?n.form.onChange(n.modelArray,n.form):n.evalExpr(n.form.onChange,{modelValue:n.modelArray,form:n.form}))},d=function(){var e=n.modelArray;if(!e){var i=r.parse(o.sfNewArray);e=[],t(i,n,e),n.modelArray=e}return e},f=n.$watch("form",function(e){if(e){if(e.titleMap||e.startEmpty===!0||n.modelArray&&0!==n.modelArray.length||n.appendToArray(),n.form&&n.form.schema&&n.form.schema.uniqueItems===!0?(n.$watch(o.sfNewArray,s,!0),n.$watch([o.sfNewArray,o.sfNewArray+".length"],l)):n.$watchGroup?n.$watchGroup([o.sfNewArray,o.sfNewArray+".length"],function(){s(),l()}):(n.$watch(o.sfNewArray,function(){s(),l()}),n.$watch(o.sfNewArray+".length",function(){s(),l()})),e.titleMap&&e.titleMap.length>0){n.titleMapValues=[];var t=function(t){n.titleMapValues=[],t=t||[],e.titleMap.forEach(function(e){n.titleMapValues.push(t.indexOf(e.value)!==-1)})};t(n.modelArray),n.$watchCollection("modelArray",t),n.$watchCollection("titleMapValues",function(t,r){if(t&&t!==r){for(var i=d();i.length>0;)i.pop();e.titleMap.forEach(function(e,r){t[r]&&i.push(e.value)}),n.validateField&&n.validateField()}})}f()}});n.appendToArray=function(){var r,a=d();if(n.form&&n.form.schema&&n.form.schema.items){var o=n.form.schema.items;o.type&&o.type.indexOf("object")!==-1?(r={},n.options&&n.options.setSchemaDefaults===!1||(r=e.isDefined(o["default"])?o["default"]:r,r&&i.traverseSchema(o,function(i,n){e.isDefined(i["default"])&&t(n,r,i["default"])}))):o.type&&o.type.indexOf("array")!==-1?(r=[],n.options&&n.options.setSchemaDefaults===!1||(r=o["default"]||r)):n.options&&n.options.setSchemaDefaults===!1||(r=o["default"]||r)}return a.push(r),a},n.deleteFromArray=function(e){var t=n.modelArray;return t&&t.splice(e,1),t};var m=function(e){return function(t){t.key&&(t.key[t.key.indexOf("")]=e)}},u={};n.copyWithIndex=function(t){var r=n.form;if(!u[t]){var a=r.items[0];if(r.items.length>1&&(a={type:"section",items:r.items.map(function(t){return t.ngModelOptions=r.ngModelOptions,e.isUndefined(t.readonly)&&(t.readonly=r.readonly),t})}),a){var o=e.copy(a);o.arrayIndex=t,i.traverseForm(o,m(t)),u[t]=o}}return u[t]}}}}]),e.module("schemaForm").directive("sfSchema",["$compile","$http","$templateCache","$q","schemaForm","schemaFormDecorators","sfSelect","sfPath","sfBuilder",function(t,r,i,n,a,o,s,l,d){return{scope:{schema:"=sfSchema",initialForm:"=sfForm",model:"=sfModel",options:"=sfOptions"},controller:["$scope",function(e){this.evalInParentScope=function(t,r){return e.$parent.$eval(t,r)};var t=this;e.lookup=function(e){return e&&(t.lookup=e),t.lookup}}],replace:!1,restrict:"A",transclude:!0,require:"?form",link:function(l,f,m,u,c){l.formCtrl=u;var h={};c(l,function(e){if(e.addClass("schema-form-ignore"),f.prepend(e),f[0].querySelectorAll){var t=f[0].querySelectorAll("[ng-model]");if(t)for(var r=0;r<t.length;r++){var i=t[r].getAttribute("ng-model");h[i.substring(i.indexOf(".")+1)]=!0}}});var p,v={},g=function(e,t){var o=[],s=a.merge(e,t,h,l.options,void 0,o);o.length>0?n.all(o.map(function(e){return r.get(e.templateUrl,{cache:i}).then(function(t){e.template=t.data})})).then(function(){y(e,t,s)}):y(e,t,s)},y=function(r,i,n){p&&(l.externalDestructionInProgress=!0,p.$destroy(),l.externalDestructionInProgress=!1),p=l.$new(),p.schemaForm={form:n,schema:r},f.children(":not(.schema-form-ignore)").remove();for(var u={},c=f[0].querySelectorAll("*[sf-insert-field]"),h=0;h<c.length;h++)u[c[h].getAttribute("sf-insert-field")]=c[h];var v=o.decorator(m.sfUseDecorator),g=Object.create(null);l.lookup(g),f[0].appendChild(d.build(n,v,u,g)),p.firstDigest=!0,setTimeout(function(){p.firstDigest=!1},0),t(f.children())(p),l.options&&l.options.setSchemaDefaults===!1||a.traverseSchema(r,function(t,r){if(e.isDefined(t["default"])){var i=s(r,l.model);e.isUndefined(i)&&s(r,l.model,t["default"])}}),l.$emit("sf-render-finished",f)},b=["*"];l.$watch(function(){var e=l.schema,t=l.initialForm||b;t&&e&&e.type&&(v.form!==t||v.schema!==e)&&Object.keys(e.properties).length>0&&(v.schema=e,v.form=t,g(e,t))}),l.$on("schemaFormRedraw",function(){var t=l.schema,r=l.initialForm?e.copy(l.initialForm):["*"];t&&g(t,r)}),l.$on("$destroy",function(){l.externalDestructionInProgress=!0}),l.evalExpr=function(e,t){return l.$parent.$eval(e,t)}}}}]),e.module("schemaForm").directive("schemaValidate",["sfValidator","$parse","sfSelect",function(t,r,i){return{restrict:"A",scope:!1,priority:500,require:"ngModel",link:function(r,n,a,o){r.$emit("schemaFormPropagateNgModelController",o);var s=null,l=r.$eval(a.schemaValidate);l.copyValueTo&&o.$viewChangeListeners.push(function(){var t=l.copyValueTo;e.forEach(t,function(e){i(e,r.model,o.$modelValue)})});var d=function(e){if(!l)return e;if(r.options&&r.options.tv4Validation===!1)return e;var i=t.validate(l,e);Object.keys(o.$error).filter(function(e){return 0===e.indexOf("tv4-")}).forEach(function(e){o.$setValidity(e,!0)});{if(i.valid)return e;if(o.$setValidity("tv4-"+i.error.code,!1),s=i.error,o.$validators)return e}};"function"==typeof l.ngModel&&l.ngModel(o),["$parsers","$viewChangeListeners","$formatters"].forEach(function(e){l[e]&&o[e]&&l[e].forEach(function(t){o[e].push(t)})}),["$validators","$asyncValidators"].forEach(function(t){l[t]&&o[t]&&e.forEach(l[t],function(e,r){o[t][r]=e})}),o.$parsers.push(d),o.$validators&&(o.$validators.schemaForm=function(){return!Object.keys(o.$error).some(function(e){return"schemaForm"!==e})});var f=l.schema;r.validateField=function(e){void 0!=e&&o.$$parentForm.$name!==e||(f&&f.type.indexOf("array")!==-1&&d(o.$modelValue),o.$setDirty?(o.$setDirty(),o.$setViewValue(o.$viewValue),o.$commitViewValue(),l.required&&o.$isEmpty(o.$modelValue)&&o.$setValidity("tv4-302",!1)):o.$setViewValue(o.$viewValue))},o.$formatters.push(function(e){return!o.$pristine||!r.firstDigest||r.options&&r.options.validateOnRender===!0?(d(o.$modelValue),e):e}),r.$on("schemaFormValidate",function(e,t){r.validateField(t)}),r.schemaError=function(){return s}}}}]),a}),define("SeedModules.AngularUI/js/seed/bootstrap-decorator",["SeedModules.AngularUI/js/seed/schema-form"],function(){angular.module("schemaForm").run(["$templateCache",function(e){e.put("decorators/bootstrap/actions-trcl.html",'<div class="btn-group schema-form-actions {{form.htmlClass}}" ng-transclude=""></div>'),e.put("decorators/bootstrap/actions.html",'<div class="btn-group schema-form-actions {{form.htmlClass}}"><input ng-repeat-start="item in form.items" type="submit" class="btn {{ item.style || \'btn-default\' }} {{form.fieldHtmlClass}}" value="{{item.title}}" ng-if="item.type === \'submit\'"> <button ng-repeat-end="" class="btn {{ item.style || \'btn-default\' }} {{form.fieldHtmlClass}}" type="button" ng-disabled="form.readonly" ng-if="item.type !== \'submit\'" ng-click="buttonClick($event,item)"><span ng-if="item.icon" class="{{item.icon}}"></span>{{item.title}}</button></div>'),e.put("decorators/bootstrap/array.html",'<div class="schema-form-array {{form.htmlClass}}" sf-field-model="sf-new-array" sf-new-array=""><label class="control-label" ng-show="showTitle()">{{ form.title }}</label><ol class="list-group" sf-field-model="" ui-sortable="form.sortOptions"><li class="list-group-item {{form.fieldHtmlClass}}" schema-form-array-items="" sf-field-model="ng-repeat" ng-repeat="item in $$value$$ track by $index"><button ng-hide="form.readonly || form.remove === null" ng-click="deleteFromArray($index)" ng-disabled="form.schema.minItems >= modelArray.length" style="position: relative; z-index: 20;" type="button" class="close pull-right"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button></li></ol><div class="clearfix" style="padding: 15px;" ng-model="modelArray" schema-validate="form"><div class="help-block" ng-show="(hasError() && errorMessage(schemaError())) || form.description" ng-bind-html="(hasError() && errorMessage(schemaError())) || form.description"></div><button ng-hide="form.readonly || form.add === null" ng-click="appendToArray()" ng-disabled="form.schema.maxItems <= modelArray.length" type="button" class="btn {{ form.style.add || \'btn-default\' }} pull-right"><i class="glyphicon glyphicon-plus"></i> {{ form.add || \'Add\'}}</button></div></div>'),e.put("decorators/bootstrap/checkbox.html",'<div class="checkbox schema-form-checkbox {{form.htmlClass}}" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess()}"><label class="{{form.labelHtmlClass}}"><input type="checkbox" sf-changed="form" ng-disabled="form.readonly" sf-field-model="" schema-validate="form" class="{{form.fieldHtmlClass}}" name="{{form.key.slice(-1)[0]}}"> <span ng-bind-html="form.title"></span></label><div class="help-block" sf-message="form.description"></div></div>'),e.put("decorators/bootstrap/checkboxes.html",'<div sf-field-model="sf-new-array" sf-new-array="" class="form-group schema-form-checkboxes {{form.htmlClass}}" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess()}"><label class="control-label {{form.labelHtmlClass}}" sf-field-model="" schema-validate="form" ng-show="showTitle()">{{form.title}}</label><div class="checkbox" ng-repeat="val in titleMapValues track by $index"><label><input type="checkbox" ng-disabled="form.readonly" sf-changed="form" class="{{form.fieldHtmlClass}}" ng-model="titleMapValues[$index]" name="{{form.key.slice(-1)[0]}}"> <span ng-bind-html="form.titleMap[$index].name"></span></label></div><div class="help-block" sf-message="form.description"></div></div>'),e.put("decorators/bootstrap/default.html",'<div class="form-group schema-form-{{form.type}} {{form.htmlClass}}" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess(), \'has-feedback\': form.feedback !== false }"><label class="control-label {{form.labelHtmlClass}}" ng-class="{\'sr-only\': !showTitle()}" for="{{form.key.slice(-1)[0]}}">{{form.title}}</label> <input ng-if="!form.fieldAddonLeft && !form.fieldAddonRight" ng-show="form.key" type="{{form.type}}" step="any" sf-changed="form" placeholder="{{form.placeholder}}" class="form-control {{form.fieldHtmlClass}}" id="{{form.key.slice(-1)[0]}}" sf-field-model="" ng-disabled="form.readonly" schema-validate="form" name="{{form.key.slice(-1)[0]}}" aria-describedby="{{form.key.slice(-1)[0] + \'Status\'}}"><div ng-if="form.fieldAddonLeft || form.fieldAddonRight" ng-class="{\'input-group\': (form.fieldAddonLeft || form.fieldAddonRight)}"><span ng-if="form.fieldAddonLeft" class="input-group-addon" ng-bind-html="form.fieldAddonLeft"></span> <input ng-show="form.key" type="{{form.type}}" step="any" sf-changed="form" placeholder="{{form.placeholder}}" class="form-control {{form.fieldHtmlClass}}" id="{{form.key.slice(-1)[0]}}" sf-field-model="" ng-disabled="form.readonly" schema-validate="form" name="{{form.key.slice(-1)[0]}}" aria-describedby="{{form.key.slice(-1)[0] + \'Status\'}}"> <span ng-if="form.fieldAddonRight" class="input-group-addon" ng-bind-html="form.fieldAddonRight"></span></div><span ng-if="form.feedback !== false" class="form-control-feedback" ng-class="evalInScope(form.feedback) || {\'glyphicon\': true, \'glyphicon-ok\': hasSuccess(), \'glyphicon-remove\': hasError() }" aria-hidden="true"></span> <span ng-if="hasError() || hasSuccess()" id="{{form.key.slice(-1)[0] + \'Status\'}}" class="sr-only">{{ hasSuccess() ? \'(success)\' : \'(error)\' }}</span><div class="help-block" sf-message="form.description"></div></div>'),e.put("decorators/bootstrap/fieldset.html",'<fieldset ng-disabled="form.readonly" class="schema-form-fieldset {{form.htmlClass}}"><legend ng-class="{\'sr-only\': !showTitle() }">{{ form.title }}</legend><div class="help-block" ng-show="form.description" ng-bind-html="form.description"></div></fieldset>'),e.put("decorators/bootstrap/help.html",'<div class="helpvalue schema-form-helpvalue {{form.htmlClass}}" ng-bind-html="form.helpvalue"></div>'),e.put("decorators/bootstrap/radio-buttons.html",'<div class="form-group schema-form-radiobuttons {{form.htmlClass}}" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess()}"><div><label class="control-label {{form.labelHtmlClass}}" ng-show="showTitle()">{{form.title}}</label></div><div class="btn-group"><label sf-field-model="replaceAll" class="btn {{ (item.value === $$value$$) ? form.style.selected || \'btn-default\' : form.style.unselected || \'btn-default\'; }}" ng-class="{ active: item.value === $$value$$ }" ng-repeat="item in form.titleMap"><input type="radio" class="{{form.fieldHtmlClass}}" sf-changed="form" style="display: none;" ng-disabled="form.readonly" sf-field-model="" schema-validate="form" ng-value="item.value" name="{{form.key.join(\'.\')}}"> <span ng-bind-html="item.name"></span></label></div><div class="help-block" sf-message="form.description"></div></div>'),
e.put("decorators/bootstrap/radios-inline.html",'<div class="form-group schema-form-radios-inline {{form.htmlClass}}" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess()}"><label class="control-label {{form.labelHtmlClass}}" ng-show="showTitle()" sf-field-model="" schema-validate="form">{{form.title}}</label><div><label class="radio-inline" ng-repeat="item in form.titleMap"><input type="radio" class="{{form.fieldHtmlClass}}" sf-changed="form" ng-disabled="form.readonly" sf-field-model="" ng-value="item.value" name="{{form.key.join(\'.\')}}"> <span ng-bind-html="item.name"></span></label></div><div class="help-block" sf-message="form.description"></div></div>'),e.put("decorators/bootstrap/radios.html",'<div class="form-group schema-form-radios {{form.htmlClass}}" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess()}"><label class="control-label {{form.labelHtmlClass}}" sf-field-model="" schema-validate="form" ng-show="showTitle()">{{form.title}}</label><div class="radio" ng-repeat="item in form.titleMap"><label><input type="radio" class="{{form.fieldHtmlClass}}" sf-changed="form" ng-disabled="form.readonly" sf-field-model="" ng-value="item.value" name="{{form.key.join(\'.\')}}"> <span ng-bind-html="item.name"></span></label></div><div class="help-block" sf-message="form.description"></div></div>'),e.put("decorators/bootstrap/section.html",'<div class="schema-form-section {{form.htmlClass}}"></div>'),e.put("decorators/bootstrap/select.html",'<div class="form-group {{form.htmlClass}} schema-form-select" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess(), \'has-feedback\': form.feedback !== false}"><label class="control-label {{form.labelHtmlClass}}" ng-show="showTitle()">{{form.title}}</label><select sf-field-model="" ng-disabled="form.readonly" sf-changed="form" class="form-control {{form.fieldHtmlClass}}" schema-validate="form" ng-options="item.value as item.name group by item.group for item in form.titleMap" name="{{form.key.slice(-1)[0]}}"></select><div class="help-block" sf-message="form.description"></div></div>'),e.put("decorators/bootstrap/submit.html",'<div class="form-group schema-form-submit {{form.htmlClass}}"><input type="submit" class="btn {{ form.style || \'btn-primary\' }} {{form.fieldHtmlClass}}" value="{{form.title}}" ng-disabled="form.readonly" ng-if="form.type === \'submit\'"> <button class="btn {{ form.style || \'btn-default\' }}" type="button" ng-click="buttonClick($event,form)" ng-disabled="form.readonly" ng-if="form.type !== \'submit\'"><span ng-if="form.icon" class="{{form.icon}}"></span> {{form.title}}</button></div>'),e.put("decorators/bootstrap/tabarray.html",'<div ng-init="selected = { tab: 0 }" ng-model="modelArray" schema-validate="form" sf-field-model="sf-new-array" sf-new-array="" class="clearfix schema-form-tabarray schema-form-tabarray-{{form.tabType || \'left\'}} {{form.htmlClass}}"><div ng-if="!form.tabType || form.tabType !== \'right\'" ng-class="{\'col-xs-3\': !form.tabType || form.tabType === \'left\'}"><ul class="nav nav-tabs" ng-class="{ \'tabs-left\': !form.tabType || form.tabType === \'left\'}"><li sf-field-model="ng-repeat" ng-repeat="item in $$value$$ track by $index" ng-click="$event.preventDefault() || (selected.tab = $index)" ng-class="{active: selected.tab === $index}"><a href="#">{{interp(form.title,{\'$index\':$index, value: item}) || $index}}</a></li><li ng-hide="form.readonly" ng-disabled="form.schema.maxItems <= modelArray.length" ng-click="$event.preventDefault() || (selected.tab = appendToArray().length - 1)"><a href="#"><i class="glyphicon glyphicon-plus"></i> {{ form.add || \'Add\'}}</a></li></ul></div><div ng-class="{\'col-xs-9\': !form.tabType || form.tabType === \'left\' || form.tabType === \'right\'}"><div class="tab-content {{form.fieldHtmlClass}}"><div class="tab-pane clearfix tab{{selected.tab}} index{{$index}}" sf-field-model="ng-repeat" ng-repeat="item in $$value$$ track by $index" ng-show="selected.tab === $index" ng-class="{active: selected.tab === $index}"><div schema-form-array-items=""></div><button ng-hide="form.readonly" ng-click="selected.tab = deleteFromArray($index).length - 1" ng-disabled="form.schema.minItems >= modelArray.length" type="button" class="btn {{ form.style.remove || \'btn-default\' }} pull-right"><i class="glyphicon glyphicon-trash"></i> {{ form.remove || \'Remove\'}}</button></div><div class="help-block" ng-show="(hasError() && errorMessage(schemaError())) || form.description" ng-bind-html="(hasError() && errorMessage(schemaError())) || form.description"></div></div></div></div><div ng-if="form.tabType === \'right\'" class="col-xs-3"><ul class="nav nav-tabs tabs-right"><li sf-field-model="ng-repeat" ng-repeat="item in $$value$$ track by $index" ng-click="$event.preventDefault() || (selected.tab = $index)" ng-class="{active: selected.tab === $index}"><a href="#">{{interp(form.title,{\'$index\':$index, value: item}) || $index}}</a></li><li ng-hide="form.readonly" ng-disabled="form.schema.maxItems <= modelArray.length" ng-click="$event.preventDefault() || (selected.tab = appendToArray().length - 1)"><a href="#"><i class="glyphicon glyphicon-plus"></i> {{ form.add || \'Add\'}}</a></li></ul></div>'),e.put("decorators/bootstrap/tabs.html",'<div ng-init="selected = { tab: 0 }" class="schema-form-tabs {{form.htmlClass}}"><ul class="nav nav-tabs"><li ng-repeat="tab in form.tabs" ng-disabled="form.readonly" ng-click="$event.preventDefault() || (selected.tab = $index)" ng-class="{active: selected.tab === $index}"><a href="#">{{ tab.title }}</a></li></ul><div class="tab-content {{form.fieldHtmlClass}}"></div></div>'),e.put("decorators/bootstrap/textarea.html",'<div class="form-group has-feedback {{form.htmlClass}} schema-form-textarea" ng-class="{\'has-error\': form.disableErrorState !== true && hasError(), \'has-success\': form.disableSuccessState !== true && hasSuccess()}"><label class="control-label {{form.labelHtmlClass}}" ng-class="{\'sr-only\': !showTitle()}" for="{{form.key.slice(-1)[0]}}">{{form.title}}</label> <textarea ng-if="!form.fieldAddonLeft && !form.fieldAddonRight" class="form-control {{form.fieldHtmlClass}}" id="{{form.key.slice(-1)[0]}}" sf-changed="form" placeholder="{{form.placeholder}}" ng-disabled="form.readonly" sf-field-model="" schema-validate="form" name="{{form.key.slice(-1)[0]}}"></textarea><div ng-if="form.fieldAddonLeft || form.fieldAddonRight" ng-class="{\'input-group\': (form.fieldAddonLeft || form.fieldAddonRight)}"><span ng-if="form.fieldAddonLeft" class="input-group-addon" ng-bind-html="form.fieldAddonLeft"></span> <textarea class="form-control {{form.fieldHtmlClass}}" id="{{form.key.slice(-1)[0]}}" sf-changed="form" placeholder="{{form.placeholder}}" ng-disabled="form.readonly" sf-field-model="" schema-validate="form" name="{{form.key.slice(-1)[0]}}"></textarea> <span ng-if="form.fieldAddonRight" class="input-group-addon" ng-bind-html="form.fieldAddonRight"></span></div><span class="help-block" sf-message="form.description"></span></div>')}]),angular.module("schemaForm").config(["schemaFormDecoratorsProvider","sfBuilderProvider","sfPathProvider",function(e,t,r){var i="decorators/bootstrap/",n=t.builders.simpleTransclusion,a=t.builders.ngModelOptions,o=t.builders.ngModel,s=t.builders.sfField,l=t.builders.condition,d=t.builders.array,f=function(e){if(e.form.tabs&&e.form.tabs.length>0){var t=e.fieldFrag.querySelector(".tab-content");e.form.tabs.forEach(function(r,i){var n=document.createElement("div");n.className="tab-pane",n.setAttribute("ng-disabled","form.readonly"),n.setAttribute("ng-show","selected.tab === "+i),n.setAttribute("ng-class","{active: selected.tab === "+i+"}");var a=e.build(r.items,e.path+".tabs["+i+"].items",e.state);n.appendChild(a),t.appendChild(n)})}},m=[s,o,a,l];e.defineDecorator("bootstrapDecorator",{textarea:{template:i+"textarea.html",builder:m},fieldset:{template:i+"fieldset.html",builder:[s,n,l]},array:{template:i+"array.html",builder:[s,a,o,d,l]},tabarray:{template:i+"tabarray.html",builder:[s,a,o,d,l]},tabs:{template:i+"tabs.html",builder:[s,a,f,l]},section:{template:i+"section.html",builder:[s,n,l]},conditional:{template:i+"section.html",builder:[s,n,l]},actions:{template:i+"actions.html",builder:m},select:{template:i+"select.html",builder:m},checkbox:{template:i+"checkbox.html",builder:m},checkboxes:{template:i+"checkboxes.html",builder:[s,a,o,d,l]},number:{template:i+"default.html",builder:m},password:{template:i+"default.html",builder:m},submit:{template:i+"submit.html",builder:m},button:{template:i+"submit.html",builder:m},radios:{template:i+"radios.html",builder:m},"radios-inline":{template:i+"radios-inline.html",builder:m},radiobuttons:{template:i+"radio-buttons.html",builder:m},help:{template:i+"help.html",builder:m},"default":{template:i+"default.html",builder:m}},[])}])}),define("SeedModules.Admin/modules/admin/boot",["require","exports","angular","app/application","angular-ui-router","SeedModules.AngularUI/js/seed/bootstrap-decorator"],function(e,t,r){var i=r.module("modules.admin.boot",["ui.router","schemaForm"]);return i}),define("SeedModules.Admin/modules/admin/configs/nav",["SeedModules.Admin/modules/admin/boot"],function(e){e.provider("SeedModules.Admin/modules/admin/configs/nav",[function(){function e(e){return e?function(t,r){var i,n;if("object"==typeof t&&"object"==typeof r&&t&&r)return i=t[e],n=r[e],i===n?0:typeof i==typeof n?i<n?-1:1:typeof i<typeof n?-1:1;throw"菜单排序异常"}:function(){return-1}}var t=this,r=65535,i=[];this.add=function(e){e.order=e.order?e.order:r,i.push(e)},this.$get=function(){return{add:t.add,tree:function(){return i.sort(e("order")),i}}}}])}),define("SeedModules.Admin/modules/admin/configs/menus",["SeedModules.Admin/modules/admin/boot"],function(e){e.run(["$state","SeedModules.Admin/modules/admin/configs/nav",function(e,t){t.add({text:"系统管理",icon:"fas fa-cog fa-fw",order:-1,children:[{text:"用户管理",itemClicked:function(t){e.go("admin.users")}},{text:"角色管理",itemClicked:function(t){e.go("admin.roles")}},{text:"设置",itemClicked:function(t){e.go("admin.settings")}}]})}])}),define("SeedModules.Admin/modules/admin/configs/router",["SeedModules.Admin/modules/admin/boot"],function(e){e.run(["$rootScope","$state","$appEnvironment",function(e,t,r){e.$on("$stateChangeSuccess",function(e,t,r,i,n){})}])}),define("SeedModules.Admin/modules/admin/configs/environment",["SeedModules.Admin/modules/admin/boot"],function(e){e.config(["$provide",function(e){var t=function(e){return new Function("return "+e+";")()}($("#app").attr("permissions"));e.constant("$permissions",t)}])}),define("SeedModules.Admin/modules/admin/module",["require","exports","angular","SeedModules.Admin/modules/admin/configs/nav","SeedModules.Admin/modules/admin/configs/menus","SeedModules.Admin/modules/admin/configs/router","SeedModules.Admin/modules/admin/configs/environment"],function(e,t,r){var i=function(){function e(e,t){t.otherwise("/admin/dashboard"),e.state("admin",{url:"/admin",templateUrl:"/SeedModules.Admin/modules/admin/views/admin.html",requires:["SeedModules.AngularUI/modules/requires","SeedModules.Admin/modules/admin/requires"]}),e.state("admin.dashboard",{url:"/dashboard",templateUrl:"/SeedModules.Admin/modules/admin/views/dashboard.html",requires:["SeedModules.AngularUI/modules/requires","SeedModules.Admin/modules/admin/requires"]}),e.state("admin.users",{url:"/users",title:"用户管理",templateUrl:"/SeedModules.Admin/modules/admin/views/users.html",requires:["SeedModules.AngularUI/modules/requires","SeedModules.Admin/modules/admin/requires"]}),e.state("admin.roles",{url:"/roles",title:"角色管理",templateUrl:"/SeedModules.Admin/modules/admin/views/roles.html",requires:["SeedModules.AngularUI/modules/requires","SeedModules.Admin/modules/admin/requires"]}),e.state("admin.settings",{url:"/settings",title:"设置",templateUrl:"/SeedModules.Admin/modules/admin/views/settings.html",requires:["SeedModules.AngularUI/modules/requires","SeedModules.Admin/modules/admin/requires"]})}return e.$inject=["$stateProvider","$urlRouterProvider"],e}();return r.module("modules.admin",["modules.admin.boot"]).config(i)});